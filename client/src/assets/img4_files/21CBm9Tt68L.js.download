(function(k){var q=window.AmazonUIPageJS||window.P,m=q._namespace||q.attributeErrors,b=m?m("AssociateRailsWebsiteAssets@sitestripe_associate_links",""):q;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,q,m){k.when("A","ac-request-interface","a-dropdown","a-popover","ac-sitestripe-nsa-links").register("ac-sitestripe-associate-links",function(b,n,h,g,e){var d={},a={},x=function(a,b,e,g){a=f(a);d[g.storeId]=a;h.getSelect(g.tagcomponent).removeOptions().addOptions(a)},
f=function(a){return a.map(function(a){return{text:a.value,value:a.value}})};b.declarative("ac-adcode-store-change","change",function(a){var b=a.$target.val();d[b]?h.getSelect(a.data.tagcomponent).removeOptions().addOptions(d[b]):n.sendRequest({params:{store_id:b},successCb:x,showMask:!1,storeId:b,tagcomponent:a.data.tagcomponent},a.data.endpoint)});b.declarative("ac-adcode-load-trigger","click",function(d){var b=d.data;a[b.name]?(e.renderAdCode(b.type),e.renderPreview(b.type)):(d=g.create(d.$target,
b),d.getDataStrategy().shouldRefreshContent=function(){return!1},d.manualRefresh=!0,a[b.name]=d);a[b.name].show()})});"use strict";k.when("A","ac-selection-utils","ac-link-id","ac-app-config").register("ac-sitestripe-nsa-links",function(b,n,h,g){var e=b.$,d={},a=null,x=null,f=null,r=g.getConfig("Associates.LinkCode"),k={search:r.smartSearch,custom:r.smartCustom},p=function(a){return e("#ac-adcode-form-"+x)},t=function(u,c,b){a=d[u];x=u;a.adOptions=e.extend(a.adOptions,m(c),c);if(f!==a.adOptions.tracking_id){c=
a.adOptions;f=a.adOptions.tracking_id;var g=h.get({tag:f,linkCode:k[u],toolCreation:r.tool,adUnitType:"smart",pageType:"SiteStripe"},{});c.linkid=g}c=a.adOptions;c=e.extend({},c);p().find(".design-options").addClass("ac-hidden");e("#ac-adcode-"+c.design).removeClass("ac-hidden");"text_links"===c.design?(delete a.adOptions.search_bar,delete a.adOptions.search_bar_position):"grid"===c.design&&(delete a.adOptions.design,"false"!==c.search_bar?(a.adOptions.search_bar=!0,a.adOptions.search_bar_position=
c.search_bar):(delete a.adOptions.search_bar_position,a.adOptions.search_bar=c.search_bar));b&&a.reload(a.adOptions);"-1"===a.adOptions.rows&&delete a.adOptions.rows;v(u)},m=function(a){var c={};a.design&&(p().find(".design-options").addClass("ac-hidden"),e("#ac-adcode-"+a.design).removeClass("ac-hidden"));a=p().find("input:visible, select:visible").serializeArray();for(var d in a)a.hasOwnProperty(d)&&(c[a[d].name]=a[d].value);return c},v=function(a){var c=d[a].getSynchronousAdCode(d[a].adOptions);
c=c.replace(/;/g,";\n").replace('\x3cscript type\x3d"text/javascript"\x3e','\x3cscript type\x3d"text/javascript"\x3e\n').replace("\x3c/script\x3e","\x3c/script\x3e\n");e("#amzn-native-adcode-"+a).text(c);w(null,"amzn-native-adcode-"+a)},w=function(a,c){c?q.setTimeout(function(){n.copyText(c)},500):n.copyText(a.data.id)};b.declarative("ac-adcode-update-options-change","change",function(a){q.setTimeout(function(){var c={};c[a.data.name]=a.$target.val();t(a.data.type,c,!0)},0)});b.declarative("ac-adcode-update-text-change",
"keypress",function(a){switch(a.$event.keyCode){case b.constants.keycodes.ENTER:a.$event.preventDefault();var c=e(a.$target),d=c.data("ac-attr-value"),g=e(a.$target).val();d!==g&&(c.data("ac-attr-value",g),a.data.value=g,c={},c[a.data.name]=g,t(a.data.type,c,!0))}});b.declarative("ac-ad-code-highlight","click",w);return{initWidget:function(a,c){d[a]=c;t(a,{},!1)},renderAdCode:v,renderPreview:function(a){d[a].reload(d[a].adOptions)}}});"use strict";k.when("A","ac-app-config").register("ac-link-id",
function(b,n){var h=function(b,e){if("string"!==typeof b.tag)throw Error("Invalid Tag");var d=b.linkCode,a=b.toolCreation,g=parseInt(n.getConfig("program_id"),10);e=n.getConfig("marketplace_id");var f={},h;if("string"!==typeof d||2>d.length||3<d.length)throw Error("Invalid LinkCode");if("string"!==typeof a||null===a.match(/^(AC|SS|Pubstudio|Feeds|PAAPI)$/i))throw Error("Invalid ToolCreation");if(isNaN(g))throw Error("Invalid Marketplace");d=n.getConfig("foresterUrl");for(h in b)b.hasOwnProperty(h)&&
(f[h]=b[h]);f.createTime=(new Date).getTime();f.marketplaceId=e;try{var k=CryptoJS.MD5(JSON.stringify(f)).toString()}catch(p){k="z7b5638deb81af5805803e8dc94cfdez"}this.linkId=k;b={linkId:k,trackingParams:f,_v:1};d&&((new Image).src=d+encodeURIComponent(JSON.stringify(b)));this.get=function(){return this.linkId}};return{get:function(b,e){e=e||{};return(new h(b,e)).get()}}});"use strict";k.when("A","ac-sitestripe-utils").register("ac-request-interface",function(b,k){function h(d,a,b){b.loadingIcon?
b.loadingIcon.hide():"";"function"===typeof b.completeCb&&b.completeCb.apply(m,arguments)}function g(b,a,e,f){b&&"function"===typeof f.successCb&&f.successCb.apply(m,arguments)}function e(b,a,e,f){"function"===typeof f.errorCb&&f.errorCb.apply(m,arguments)}return{sendRequest:function(b,a){if(a){b.loadingIcon?b.loadingIcon.show():"";a={contentType:"application/json",url:a,type:b.ajax_type||"GET",data:b.params,complete:h};var d={showMask:!0,maskMsg:b.loadingMsg};if(b.loadingIcon||!1===b.showMask)d.showMask=
!1;k.ajax(a,g,e,b,d)}}}});"use strict";k.when("A","ac-string-utils","ac-card","ac-alerts-manager","ready").register("ac-sitestripe-utils",function(b,n,h,g){function e(a,b){h.isCard(a)?h.showLoading(a,b):0===f&&v(b).css("display","block")}var d=b.$,a=null,m=n.getString("loading"),f=0;try{var r=q.self!==q.top}catch(c){r=!0}b=function(a){return d("meta[name\x3d"+a+"]").attr("content")||""};var y=b("csrf-token"),p=b("auth-store-id"),t="y"===b("auth-su")?!0:!1,z="y"===b("string-debug")?!0:!1,v=function(c){c=
c||m;null===a&&(a=d('\x3cdiv id\x3d"ac-overlay" class\x3d"ac-overlay"\x3e\x3cdiv class\x3d"ac-overlay-msg-wrapper"\x3e\x3cspan class\x3d"ac-overlay-icon"\x3e\x3c/span\x3e\x3cspan id\x3d"ac-overlay-msg" class\x3d"ac-overlay-msg"\x3e'+m+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"),a.appendTo(document.body));a.find("#ac-overlay-msg").text(c);return a},w=function(a){return!h.isCard(a.maskContainer)&&a.trackRequest},u=function(a){a.async=a.async||!0;a.type=a.type||"GET";a.timeout=18E5;a.data=a.data||{};p&&
(a.data.store_id=p);z&&(a.data.stringDebug=1);a.headers=d.extend({"X-CSRF-Token":y},a.headers);r&&(a.data.ifr=1);t&&(a.xhr=function(){return new Amazon.IDP.xhr},a.data.isu=1);"POST"===a.type&&(a.data=JSON.stringify(a.data))};return{ajax:function(a,b,m,n,l){a=a||{};l=l||{};l.trackRequest=!1===l.trackRequest?!1:!0;var c=a.complete;a.error=function(a,b,c){l.skipAlertsReset||g.removeAllErrors(l.maskContainer);c={isError:!0,error:c,errorCode:a.status,status:b};var d=g.handleStandardAjaxError(a,r,l.maskContainer);
m&&"function"===typeof m&&m(c,b,a,n);d||k.error("Unknown error occurred","ac-utils","ajax")};a.success=function(a,c,d){b(a,c,d,n)};a.complete=function(a,b){w(l)&&f--;if(l.showMask){var d=l.maskContainer;h.isCard(d)?h.hideLoading(d):0===f&&v().css("display","none")}c&&"function"===typeof c&&c(b,a,n)};l.showMask&&e(l.maskContainer,l.maskMsg);w(l)&&f++;u(a);l.skipAlertsReset||g.removeAllErrors(l.maskContainer);return d.ajax(a)},isInIFrame:function(){return r},getStoreId:function(){return p},getTrackingId:function(){return d("#tracking_id").val()||
p},isSuperUser:function(){return t},addRequiredParamsInUrl:function(a){if(a)return t&&(a+="\x26isu\x3d1"),a},debounce:function(a,b){var c;return function(d){var e=this,f=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(e,f)},b)}},escapeHtml:function(a){return"string"===typeof a?d("\x3cdiv\x3e").text(a).html():a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},textFill:function(a,b,e){e=e||3;d.each(a,function(a,c){a=b;var f=d("span:visible:first",c);c=d(c).width();
do{f.css("font-size",a);var g=f.width();--a}while(g>c&&a>e)})}}})});