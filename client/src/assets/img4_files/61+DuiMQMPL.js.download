(function(r){var t=window.AmazonUIPageJS||window.P,z=t._namespace||t.attributeErrors,a=z?z("DetailPageAttachAssets",""):t;a.guardFatal?a.guardFatal(r)(a,window):a.execute(function(){r(a,window)})})(function(r,t,z){"use strict";r.register("attach-variant-registration",function(){function a(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0}var b={};a("CETECH_WTY_INTERSTITIAL_EXPERIMENT_561605:C");a("CETECH_WTY_INTERSTITIAL_GATING_578923:C");a("CETECH_DP_ATCH_DCS_DEPRECATION_842941:T1");
return{registerVariantFlag:a,getVariantFlag:function(a){return b.hasOwnProperty(a)}}});"use strict";r.when("A","attach-weblabs","attach-logging","attach.amazonapi.cart.add-items").register("attach-baselink",function(a,b,h,f){var e=null;r.when("BaseLinkFormHelper").execute(function(a){e=a});var d=function(a){t.ueLogError&&t.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return e?e.addBaseLinkFields(a,b):null},
addLinkedWarranty:function(a,b,c){if(!a||!a.baseItemAsin)return d("baseItemAsin is undefined. Abandoning ATC since Base item and Warranty association can not be done."),c();a={asin:a.warrantyAsin,offerListingId:a.offeringId,quantity:parseInt(a.quantity),additionalParameters:{itemAssociation:{associatedItemId:a.baseItemAsin,deleteConstraint:{mutuallyInclusive:!1},quantityConstraint:{invarianceFactor:1,quantityEditable:!0},programType:"AmazonProtect",renderType:"renderAll"}}};f.addItems([a],h.REF_TAGS.WARRANTY_ADD_TO_CART).then(b).catch(c)},
mSilogError:d}});"use strict";r.when("A").register("attach-external-atc-interceptor",function(a){var b=a.$,h=[],f=[],e=!1,d=!1,q=function(){d=!0},l=function(a){var c=f.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};return{updateAttachModule:function(a){q&&(e?l(a):h.push(a))},loadAttachModule:function(a){if(d)for(e=!0,f=a;0<h.length;)a=h.shift(),l(a)},unloadAttachModule:function(){e=!1;f=
[]},enableModule:q}});"use strict";r.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(b){var h=a.$("#attach-desktop-sideSheet");var f=a.$("#attach_accessory_sheet");h=h.length?h:f;h.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;f=document.createElement("iframe");f.setAttribute("src",b);f.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");
f.setAttribute("name","checkoutPrefetch");f.setAttribute("id","checkoutPrefetch");h.append(f)}}});"use strict";r.when("A","attach-common","attach-variant-registration","attach-logging").register("attach-weblabs",function(a,b,h,f){var e={},d=e.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",
DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint",MOBILE_WEB_MBS_EXPERIMENT_WEBLAB:"#attach-accessory-mobile-web-mbs",DSS_MBS_UI_ENHANCEMENT:"#attach-dss-mbs-enhancement",DSS_MBS_UI_ENHANCEMENT_LD:"#attach-dss-mbs-ld-enhancement",DSS_MBS_EU_COMPLIANCE:"#attach-dss-mbs-eu-compliance",
SHOW_WFM_ENABLE:"#attach-enabled-for-wfm"},q=e.Marketplaces={IN:"A21TJRUUN4KGV"};e.isWarrantyPaneSuppressed=function(){return a.$(d.ATTACH_MARKETPLACE_ID).val()===q.IN&&(!e.servicesInterstitialDeprecated()||b.hasAccessories())};e.getTreatmentAndTrigger=function(a){return h.getVariantFlag(a+":T1")?(t.ue.trigger(a,"T1"),"T1"):h.getVariantFlag(a+":C")?(t.ue.trigger(a,"C"),"C"):"UNALLOCATED"};e.isInterstitialSuppressionGateEnabled=function(){return"T1"===e.getTreatmentAndTrigger("CETECH_WTY_INTERSTITIAL_GATING_578923")};
e.isInterstitialSuppressionExperimentEnabled=function(){return"T1"===e.getTreatmentAndTrigger("CETECH_WTY_INTERSTITIAL_EXPERIMENT_561605")};e.triggerWarrantySuppressionExperiment=function(q){var c=a.$("#attach-customerId, #attach-customer-id").val();if(q&&c&&t.ue&&t.ue.event&&t.ue.trigger&&e.isInterstitialSuppressionGateEnabled()){q=e.isInterstitialSuppressionExperimentEnabled();var k=b.hasAccessories();c=f.getInterstitialExperimentPayload(e.isWarrantyTwisterPlusDesktopEnabled(),c,q,k);f.logInterstitialExperimentData(c)}};
e.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(d.SHOW_ACCESSORY_COUPONS_DSS)};e.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(d.SHOW_ACCESSORY_COUPONS_MBS)};e.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(d.CORE_FREE_SHIPPING_MESSAGE)};e.isAttachDebugParametersEnabled=function(){return 0<a.$(d.DEBUG_IS_DEBUG).length||0<a.$(d.DEBUG_QUERY_STRING).length};e.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(d.WTY_TWISTER_CONTAINER).length};
e.isAmazonApiAjaxEnabled=function(){return b.elementExists(d.AAPI_AJAX_ENDPOINT)};e.isAttachEnabledForWFM=function(){return b.elementExists(d.SHOW_WFM_ENABLE)};e.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};e.isMobileWebMBSEnabled=function(){return b.elementExists(d.MOBILE_WEB_MBS_EXPERIMENT_WEBLAB)};e.isDssMbsEnhancementEnabled=function(){return b.elementExists(d.DSS_MBS_UI_ENHANCEMENT)};e.isLdDssMbsEnhancementEnabled=function(){return b.elementExists(d.DSS_MBS_UI_ENHANCEMENT_LD)};
e.isDssMbsEuComplianceActive=function(){return b.elementExists(d.DSS_MBS_EU_COMPLIANCE)};e.isDcsDeprecated=function(){return h.getVariantFlag("CETECH_DP_ATCH_DCS_DEPRECATION_842941:T1")};return e});"use strict";r.when("A").register("attach-logging",function(a){var b={},h,f,e;b.NEXUS={PRODUCER_ID:"atch",PRODUCER_ID_WARRANTY:"warranties",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"11",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"15",
ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",WARRANTY_WIDGET_INTERACTION_PREFIX:"warranty.widgetInteraction.",WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION:"3",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",
PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss",MBS:"mbs",MBS_APP:"mbs_app",MBS_WEB:"mbs_web"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",
ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",
MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",DSS_BASE_LD_MISSING_TIMER:"attachDesktopBaseLightningDealMissingTimer",MBS_BASE_LD_MISSING_TIMER:"attachMobileBaseLightningDealMissingTimer",
DSS_LD_MISSING_ATTACH:"attachDesktopLightningDealMissingAttachContainer",MBS_APP_LD_MISSING_ATTACH:"attachMobileAppLightningDealMissingAttachContainer",MBS_WEB_LD_MISSING_ATTACH:"attachMobileWebLightningDealMissingAttachContainer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError",
ATTACH_MBS_ATC_STAY_AJAX_SUCCESS:"attachMbsAtcStayAjaxSuccess",ATTACH_MBS_ATC_STAY_AJAX_FAILURE:"attachMbsAtcStayAjaxFailure",ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE:"attachMbsAtcStayAjaxIncomplete",ATTACH_MBS_ATC_ADD_ITEMS_API_SUCCESS:"attachMbsAtcAddItemsApiSuccess",ATTACH_MBS_ATC_ADD_ITEMS_API_FAILURE:"attachMbsAtcAddItemsApiFailure",ATTACH_MBS_ATC_ADD_ITEMS_API_INCOMPLETE_FAILURE:"attachMbsAtcAddItemsApiIncomplete",ATTACH_MBS_ATC_GURUPA_SUCCESS:"attachMbsAtcGurupaSuccess",ATTACH_MBS_ATC_GURUPA_FAILURE:"attachMbsAtcGurupaFailure",
ATTACH_MBS_GET_CART_SUMMARY_SUCCESS:"attachMbsGetCartSummarySuccess",ATTACH_MBS_GET_CART_SUMMARY_FAILURE:"attachMbsGetCartSummaryFailure",ALM_DSS_BASE_ATC_SUCCESS:"almAddBaseSuccessDss",ALM_DSS_BASE_ATC_FAILURE:"almAddBaseFailureDss",ALM_MBS_BASE_ATC_SUCCESS:"almAddBaseSuccessMbs",ALM_MBS_BASE_ATC_FAILURE:"almAddBaseFailureMbs",WARRANTY_MBS_APP_ATC_SUCCESS:"warrantyMbsAppAtcSuccess",WARRANTY_MBS_APP_ATC_FAILURE:"warrantyMbsAppAtcFailure",WARRANTY_MBS_WEB_ATC_SUCCESS:"warrantyMbsWebAtcSuccess",WARRANTY_MBS_WEB_ATC_FAILURE:"warrantyMbsWebAtcFailure",
WARRANTY_DSS_ATC_CLICK:"warrantyDssAtcClick",WARRANTY_DSS_ATC_SUCCESS:"warrantyDssAtcSuccess",WARRANTY_DSS_ATC_FAILURE:"warrantyDssAtcFailure",WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_SUCCESS:"warrantyDssWarrantyPaneAtcCartApiSuccess",WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_INCOMPLETE:"warrantyDssWarrantyPaneAtcCartApiIncomplete",WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_FAILURE:"warrantyDssWarrantyPaneAtcCartApiFailure",WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_SUCCESS:"warrantyDesktopAtcByAccessoriesPaneSuccess",
WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_INCOMPLETE:"warrantyDesktopAtcByAccessoriesPaneIncomplete",WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_FAILURE:"warrantyDesktopAtcByAccessoriesPaneFailure",WARRANTY_MOBILE_WEB_ATC_WITH_BASE_SUCCESS:"warrantyMobileWebAtcWithBaseSuccess",WARRANTY_MOBILE_WEB_ATC_WITH_BASE_INCOMPLETE:"warrantyMobileWebAtcWithBaseIncomplete",WARRANTY_MOBILE_WEB_ATC_WITH_BASE_FAILURE:"warrantyMobileWebAtcWithBaseFailure",SHOW_MBS:"attachShowMbs",SHOW_WARRANTY:"attachShowWarranty",SHOW_MBS_ON_APP:"attachShowMbsOnApp",
SHOW_MBS_ON_WEB:"attachShowMbsOnWeb",SHOW_WARRANTY_ON_WEB:"attachShowWarrantyOnWeb",SHOW_WARRANTY_ON_APP:"attachShowWarrantyOnApp"};b.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.METRICS={DPX_MOBILE_APP_ATC:"DetailPage_MobileApp_AddToCart",DPX_MOBILE_WEB_ATC:"DetailPage_MobileWeb_AddToCart"};b.initialize=function(a,d){h=a;f=d;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_",WARRANTY_WIDGET_INTERACTION:"dp_atc_"+a+"_w_w_i_"}};b.setPayloadBuilder=
function(a){e=function(){var q=a();q.feature=h;q.obfuscatedMarketplaceId=f||t.ue_mid;q.producerId=b.NEXUS.PRODUCER_ID;q.requestId=b.getRandomHexString();return q}};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(q,d){if(t.ue&&t.ue.event){var c={ssd:!1};q.customerId=a.$("#attach-customerId").val()||null;d==b.NEXUS.WARRANTY_WIDGET_INTERACTION_PREFIX+b.NEXUS.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION?t.ue.event(q,b.NEXUS.PRODUCER_ID_WARRANTY,
d,c):t.ue.event(q,b.NEXUS.PRODUCER_ID,d,c)}};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+
b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.getWarrantyPayload=function(a,b){return{asin:a,
priceFormatted:b,priceDecimal:null,currencySymbol:null}};b.logAccessoryAddToCart=function(a){var d=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,c=e();c.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;c.displayPosition=parseInt(a.index)+1;c.accessoryAsin=a.asin;c.accessoryAsinPrice=a.priceFormatted;c.accessoryItemCurrencySymbol=a.currencySymbol;c.accessoryItemPriceDecimal=a.priceDecimal;c.couponType=a.couponType;c.couponDecimal=a.couponDecimal;c.dealType=a.dealType;c.dealPercentSavings=
a.dealPercentSavings;c.dealDollarAmount=a.dealDollarAmount;c.categoryDisplayPosition=parseInt(a.categoryIndex)+1;c.categoryTitle=a.categoryTitle;c.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(c,d)};b.logAccessoryImpressions=function(a){var d=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,c=e();c.accessories=[];for(var k=0;k<a.length;k++){var p=a[k];c.accessories.push({displayPosition:parseInt(p.index)+1,asin:p.asin,price:p.priceFormatted,
currencySymbol:p.currencySymbol,priceDecimal:p.priceDecimal,couponType:p.couponType,couponDecimal:p.couponDecimal,dealType:p.dealType,dealPercentSavings:p.dealPercentSavings,dealDollarAmount:p.dealDollarAmount,categoryDisplayPosition:parseInt(p.categoryIndex)+1,categoryTitle:p.categoryTitle,displayPositionWithinCategory:parseInt(p.asinIndexWithinCategory)+1})}b.log(c,d)};b.logWarrantyAddToCart=function(e,f){f?(f=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION,d(e,f),
a.capabilities.isAmazonApp?b.logCount(b.CSM_METRICS.WARRANTY_MBS_APP_ATC_FAILURE):a.capabilities.mobile?b.logCount(b.CSM_METRICS.WARRANTY_MBS_WEB_ATC_FAILURE):b.logCount(b.CSM_METRICS.WARRANTY_DSS_ATC_FAILURE)):(f=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION,d(e,f),a.capabilities.isAmazonApp?b.logCount(b.CSM_METRICS.WARRANTY_MBS_APP_ATC_SUCCESS):a.capabilities.mobile?b.logCount(b.CSM_METRICS.WARRANTY_MBS_WEB_ATC_SUCCESS):b.logCount(b.CSM_METRICS.WARRANTY_DSS_ATC_CLICK),b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,
e.asin))};var d=function(a,d){var c=e();c.asin=a.asin;c.price=a.priceFormatted;c.warrantyCurrencySymbol=a.currencySymbol;c.warrantyPriceDecimal=a.priceDecimal;b.log(c,d)};b.logWarrantyImpression=function(a){var d=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,c=e();c.asin=a.asin;c.price=a.priceFormatted;c.warrantyCurrencySymbol=a.currencySymbol;c.warrantyPriceDecimal=a.priceDecimal;b.log(c,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyWidgetInteraction=
function(a){var d=b.NEXUS.WARRANTY_WIDGET_INTERACTION_PREFIX+b.NEXUS.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION,c=e();c.asin=a.asin;c.action=a.action;b.log(c,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_WIDGET_INTERACTION,a.asin)};b.logWarrantyInteractionData=function(d,e){var c=e.closest(".attach-warranty-box");e=a.$(c).find(".dssMbs__r input[type\x3dcheckbox]")[0].name;c=a.$(c).find("input[name\x3d'asin."+e+"']").val();b.logWarrantyWidgetInteraction({index:e,asin:c,action:d})};b.logInterstitialExperimentData=
function(a){t.ue.event(a,"warranties","warranty.InterstitialExperimentLog.8",{ssd:!1})};b.getInterstitialExperimentPayload=function(b,d,c,k){return{customerId:d,obfuscatedMarketplaceId:f||t.ue_mid,inTreatment1:c,twisterPlusEnabled:b,hasAccessories:k,baseItemAsin:a.$("#attach-base-asin, #attach-baseAsin, #ASIN").val(),baseItemBuyingPrice:a.$("#attach-base-product-price").val(),baseItemCurrencySymbol:a.$("#attach-base-product-currency-symbol").val().toString(),warranty0Asin:a.$('.attach-warranty-box input[name\x3d"asin.0"]').val()||
"n/a",warranty0Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.0"]').val()||"n/a",warranty1Asin:a.$('.attach-warranty-box input[name\x3d"asin.1"]').val()||"n/a",warranty1Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.1"]').val()||"n/a",warranty2Asin:a.$('.attach-warranty-box input[name\x3d"asin.2"]').val()||"n/a",warranty2Price:a.$('.attach-warranty-box input[name\x3d"warrantyPrice.2"]').val()||"n/a",isDesktop:!a.capabilities.mobile}};b.logWarrantyRefTag=function(a,d){var c=
e().baseAsin;b.logRefTag(a+c+"_"+d)};b.logSecondarySheetRefTag=function(a){var d=e().baseAsin;b.logRefTag(a+"_"+d)};b.logRefTag=function(d){"A21TJRUUN4KGV"===f&&a.get(b.ENDPOINTS.REF_TAG_IN+d)};b.logMobileBaseAtc=function(d){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);d&&d.data&&"add-to-cart"===d.data.buttonID&&b.logCount(a.capabilities.isAmazonApp?b.METRICS.DPX_MOBILE_APP_ATC:b.METRICS.DPX_MOBILE_WEB_ATC)};b.logCount=function(a,b){t.ue&&t.ue.count&&(b=b||1,t.ue.count(a,(t.ue.count(a)||0)+
b))};b.logCountOnce=function(a){t.ue&&t.ue.count&&!t.ue.count(a)&&t.ue.count(a,1)};b.logError=function(a,b,c){t.ueLogError&&t.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var d=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,c=e();b.log({quantity:c.quantity.toString(),baseAsin:c.baseAsin,warningMessage:a},d)};b.logPromotionClaimed=function(a){var d=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,
c=e();c.asin=a.asin;c.accessoryCurrencySymbol=a.currencySymbol;c.accessoryPriceDecimal=a.priceDecimal;c.displayPosition=a.index+1;null!==a.couponType&&(c.promoDecimal=a.couponDecimal,c.promoDecimalType=a.couponType,c.promoType="coupon");b.log(c,d)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(t.uet)&&t.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(t.uex)&&t.uex("ld",a,{wb:1})};return b});"use strict";r.when("A","3p-promise",
"attach-variant-registration","attach-logging","attach.utilities.add-to-cart.base-product").register("attach-common",function(a,b,h,f,e){var d={},q=d.Marketplaces={IN:"A21TJRUUN4KGV"};d.uniqueId=null;d.itemAssocTypeValue="Attach";d.selectedBaseLightningDeal=!1;d.cartInitiateId=!1;d.isAttachEnabledForWFM=!1;d.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4};var l=d.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled",
DSS_CART:".attach-cart-button",DSS_PROCEED:".attach-checkout-button",HAS_DDWL:"#attach-has-ddwl",ALM_BRAND_ID_SELECTOR:"#attach-alm-brand-id",ALM_WFM_BRAND_ID:"VUZHIFdob2xlIEZvb2Rz",ATTACH_HAS_RECOMMENDATIONS_FLAG:"#attach-has-recommendations"},c=d.Endpoints={PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed",ALM_PROCEED_TO_CHECKOUT:"/alm/byg",PROCEED_TO_CART:"/gp/cart/view/html"};d.buyButton=a.$(l.ADD_TO_CART_BUTTON);d.reject=function(b,c,e){return d.rejectPromise(a.$.Deferred(),
b,c,e)};d.getInputValueByNameAndIndex=function(b,c){b=a.$('input[name\x3d"'+b+"."+c+'"]')[0];return a.$(b).val()};d.rejectPromise=function(b,c,d,e){if(d&&d.count&&t.ue&&t.ue.count)if("string"===typeof d.count)t.ue.count(d.count,1);else if(a.$.isArray(d.count))for(var p=0;p<d.count.length;p++)t.ue.count(d.count[p],1);return b.reject(c,d,e)};d.pipeJSON=function(a){try{return JSON.parse(a)}catch(p){return d.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};d.unescapeJson=function(a){if(!a)return null;
a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};d.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};d.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};d.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};d.hasWarranty=function(){return d.elementExists("#attachSIDeprecated")&&d.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};
d.hasMonthlyWarranty=function(){return d.elementExists("#attach-monthly-warranty")};d.hasAccessories=function(){return"true"===a.$(l.ATTACH_HAS_RECOMMENDATIONS_FLAG).val()};d.hasDataDrivenWeblab=function(){return"true"===a.$(l.HAS_DDWL).val()};d.isDiscriminatedOffersEnabled=function(){return d.elementExists(l.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(l.DISCRIMINATED_OFFERS_ENABLED).val():a.$(l.ATTACH_MARKETPLACE_ID).val()===q.IN};d.addBaseProduct=function(b,c){var p=e.createRequest(d.getAtcForm());
p.isValid()?(p=p.execute(),p.then(function(a){a.response&&!a.error&&"function"===typeof b?b(a):a.error&&"function"===typeof c&&c(a)}),f.logCount(f.CSM_METRICS.ATTACH_BASE_ATC_CLICK),a.trigger("attach:add-base-to-cart",p)):d.submitATCForm()};d.submitATCForm=function(){var b=d.getAtcForm();f.logCount(f.CSM_METRICS.ATTACH_BASE_ATC_CLICK);b=b.serializeArray();b=a.$.param(b);b=a.$.ajax({type:"POST",url:"/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",data:b,headers:{Accept:"text/html,*/*"}});
b.fail(function(a){f.logCount(f.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);f.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};d.isWFMPage=function(){return a.$(l.ALM_BRAND_ID_SELECTOR).val()===l.ALM_WFM_BRAND_ID};d.getAlmBrandId=function(){return a.$(l.ALM_BRAND_ID_SELECTOR).val()};d.getAtcForm=function(){return d.buyButton.closest("form")};d.isMTAEnabledForAttach=function(){return!0};d.getDeferredFromPromise=function(b){var c=a.$.Deferred();b.then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)});
return c.promise()};d.getPromiseFromDeferred=function(a){return new b(function(b,c){a.then(b).fail(c)})};d.bindEventToCallback=function(b,c,d){a.$(b).unbind(c,d);a.$(b).bind(c,d)};d.setupDesktopEgressButtons=function(){d.bindEventToCallback(l.DSS_CART,"click",function(){f.logCount(f.CSM_METRICS.ATTACH_CART_CLICK)});d.bindEventToCallback(l.DSS_PROCEED,"click",function(){f.logCount(f.CSM_METRICS.ATTACH_CHECKOUT_CLICK);var a=c.PROCEED_TO_CHECKOUT;d.isWFMPage()&&d.isAttachEnabledForWFM&&d.getAlmBrandId()&&
(a=c.ALM_PROCEED_TO_CHECKOUT+"?almBrandId\x3d"+d.getAlmBrandId());document.location=d.cartInitiateId?a+"\x26cartInitiateId\x3d"+d.cartInitiateId+"\x26ref_\x3ddp_atch_dss_proceed":a+"\x26ref_\x3ddp_atch_dss_proceed"})};d.proceedToCart=function(a){t.location="string"===typeof a?c.PROCEED_TO_CART+"?ref_\x3d"+a:c.PROCEED_TO_CART};d.isPromise=function(b){return b&&a.$.isFunction(b.then)&&a.$.isFunction(b.catch)};return d});"use strict";r.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs",
"attach-variant-registration","attach.utilities.focus-management").register("attach-desktop-warranty-pane",function(a,b,h,f,e,d,q){var l={name:"warranty"},c=l.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:'input[name\x3d"items[0.base][asin]"], #ASIN',MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_DEAL_QUANTITY:"#dealx_quantity_dropdown",
ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_WARRANTY_IMAGE:".attach-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_ADD_BUTTON_T1:".attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",
WARRANTY_CHECKBOX:".dssMbs__r input[type\x3dcheckbox]",WARRANTY_NOT_ADDED:"#attach-no-warranty-alert",WARRANTY_NOT_ADDED_T1:".attach-no-warranty-alert",WARRANTY_LEARN_MORE_HEADER:".attach-warranty-learn-more",WARRANTY_REVIEW_LINK:".warranty-review-link",WARRANTY_POLICY_DOCUMENTS:".warranty-policy-documents",WARRANTY_DETAIL_PAGE_LINK:".warranty-detail-page-link",WARRANTY_BOX:".attach-warranty-box",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_ADD_BUTTON_LD_T1:".attachSiAddCoverage-ld",
PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"};l.getWarrantyLoggingPayload=function(){var d=a.$(c.ASIN).val(),p=a.$(c.PRICE_FORMATTED),f=a.$(c.PRICE_AMOUNT);return!e.servicesInterstitialDeprecated()&&b.elementExists(f)?{asin:d,priceFormatted:p.text().trim(),priceDecimal:parseFloat(f.val())||null,currencySymbol:a.$(c.BASE_CURRENCY_SYMBOL).val()||null}:{asin:d,priceFormatted:p.text().trim(),priceDecimal:null,currencySymbol:null}};l.appendWarrantyToATCForm=function(d,p){if(a.$(c.BASE_ASIN).val()&&d&&p){var k=
b.getAtcForm();k.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var h=1;e.isWarrantyTwisterPlusDesktopEnabled()&&(h+=1);h=k.find("input[name^\x3d'offeringID']").length+h;var n=a.$(c.ATC_QUANTITY).val()||1,g="quantity."+h,l="asin."+h;k.find('input[name\x3d"'+g+'"]').remove();k.find('input[name\x3d"'+l+'"]').remove();k.append('\x3cinput type\x3d"hidden" id\x3d"'+g+'" name\x3d"'+g+'" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');
k.append('\x3cinput type\x3d"hidden" id\x3d"'+l+'" name\x3d"'+l+'" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');k.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+h+'" name\x3d"offeringID.'+h+'" value\x3d"'+p+'" class\x3d"attach-warranty-input"/\x3e');k.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][quantity]" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');k.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][asin]" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');
k.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][offerListingId]" value\x3d"'+p+'" class\x3d"attach-warranty-input" /\x3e');d=k.find('input[name\x3d"itemCount"]');0===d.length?k.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+h+'"\x3e'):d[0].value=h;a.$("#atch__bl").length&&f.createBaseLinkFormFields(h+1,k)}};l.clearWarrantyFromATCForm=function(){b.getAtcForm().find(c.ATC_WARRANTY).remove()};l.load=function(d){if(e.servicesInterstitialDeprecated()){if(b.elementExists(c.PANE))a.$(c.PANE).removeClass("aok-hidden");
else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(b.selectedBaseLightningDeal)if(b.elementExists(c.PANE_LD))a.$(c.PANE+", "+c.PANE_LD).toggleClass("aok-hidden");else return b.reject(b.FailureModes.UNBIND_ATC);b.elementExists(c.PANE_EXPERIMENT_DISPLAY)&&a.$(c.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(c.JSON_DATA)){var p=b.unescapeJson(a.$(c.JSON_DATA).val());p=JSON.parse(p)}return p?l.renderClientSide(d,p):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,
{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};l.renderClientSide=function(b,c){var d="",e=c.baseASIN,p="dp_atch_dss_w_lm_"+e+"_"+c.asin,g="dp_atch_dss_w_r_"+e+"_"+c.asin;e="dp_atch_dss_w_lm_"+e+"_"+c.asin;var f=a.$("#stringTranslation-si-warranty-title").val(),k=a.$("#stringTranslation-si-accident-protection").val(),h=a.$("#stringTranslation-si-from").val(),l=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),m=a.$("#stringTranslation-item-added-to-cart").val(),q=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),
u=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),w=a.$("#stringTranslation-si-add-coverage").val(),F=a.$("#stringTranslation-si-no-thanks").val(),G=a.$("#stringTranslation-services-bundle-detail-link").val();d+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+c.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+
f+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';null!==c.thumbImage&&(d+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+c.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');d+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+p+'"\x3e\n                        \x3cstrong\x3e'+(null!==c.displayTitle?c.displayTitle:k.replace("${brandName}",c.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+h+" "+c.merchantName+"\x3c/span\x3e\n";Number(c.averageRating)&&Number(c.numReviews)&&Number(c.numFullStars)&&"boolean"===typeof c.hasHalfStar&&(p=l.replace("${averageRating}",c.averageRating),d+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+c.numFullStars+(c.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+p+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+c.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==c.buyingPriceAmount&&(d+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+c.buyingPriceAmount+'"\x3e\n');d+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+c.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(g=0;g<c.bulletPoints.length;g++)d+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+c.bulletPoints[g].text+"\x3c/span\x3e\x3c/li\x3e\n";d+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
m+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
q+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+u+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
c.asin+'" data-offering-id\x3d"'+c.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+w+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
F+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+e+'"\x3e\n                '+G+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(d)};l.onAttachAddBaseToCart=function(a){b.isPromise(a)?a.finally(l.clearWarrantyFromATCForm):a.always(l.clearWarrantyFromATCForm)};l.closeSheetAndSubmitForm=function(){if(e.isDssMbsEnhancementEnabled()){var d=a.$(c.WARRANTY_CHECKBOX+":checked").get(0),p=b.getInputValueByNameAndIndex("asin",d.name);d=b.getInputValueByNameAndIndex("warrantyPrice",d.name);h.logWarrantyAddToCart(h.getWarrantyPayload(p,
d))}else h.logWarrantyAddToCart(l.getWarrantyLoggingPayload());e.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct(function(a){"add-items.incomplete-add.error/v1"===a.response.type?h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_INCOMPLETE):h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_SUCCESS)},function(){h.logCount(h.CSM_METRICS.WARRANTY_DSS_WARRANTY_PANE_ATC_CART_API_FAILURE)});l.sheet.next()};l.setSelectedWarrantyOptionDataOnATCForm=function(){var d=
a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(d){var p=d.name;d=b.getInputValueByNameAndIndex("asin",p);p=b.getInputValueByNameAndIndex("offerId",p);l.appendWarrantyToATCForm(d,p);l.closeSheetAndSubmitForm()}else e.isLdDssMbsEnhancementEnabled()?a.$(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED).show()};l.setSelectedWarrantyOptionDataOnATCFormEU=function(d){var p=d.find(".a-button-input").attr("name"),f=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);f&&p==f.name?(p=f.name,d=b.getInputValueByNameAndIndex("asin",
p),p=b.getInputValueByNameAndIndex("offerId",p),l.appendWarrantyToATCForm(d,p),l.closeSheetAndSubmitForm()):e.isLdDssMbsEnhancementEnabled()?d.closest(c.WARRANTY_BOX).find(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED+"-"+p).show()};l.setup=function(d){l.sheet=d;a.$(c.PANE).hide();if(e.isDssMbsEnhancementEnabled())a.loadImageManually(a.$(c.PANE_WARRANTY_IMAGE).filter("[data-a-image-source]")),a.$("div[id^\x3dattach-no-warranty-alert-]").hide(),a.$(c.WARRANTY_NOT_ADDED).hide(),a.$(c.WARRANTY_NOT_ADDED_T1).hide(),
a.$(c.PANE_LD).find(c.WARRANTY_CHECKBOX).prop("checked",!1),a.$(c.PANE).find(c.WARRANTY_CHECKBOX).prop("checked",!1);else{var p=a.$(c.PANE_IMAGE).attr("data-image-url");a.$(c.PANE_IMAGE).attr("src",p)}e.isDssMbsEuComplianceActive()&&e.isDssMbsEnhancementEnabled()?a.$(c.PANE_ADD_BUTTON_T1).click(function(){l.setSelectedWarrantyOptionDataOnATCFormEU(a.$(this))}):a.$(c.PANE_ADD_BUTTON).click(function(){if(e.isDssMbsEnhancementEnabled())l.setSelectedWarrantyOptionDataOnATCForm();else{var b=a.$(this).find("button");
e.servicesInterstitialDeprecated()&&(b=a.$(this).find("[data-asin]"));var c=b.attr("data-asin");b=b.attr("data-offering-id");l.appendWarrantyToATCForm(c,b);l.closeSheetAndSubmitForm()}});e.isDssMbsEnhancementEnabled()&&(a.$(c.WARRANTY_CHECKBOX).change(function(d){var e=this;d="cn";var p=e.name,f=a.$(this).closest(c.WARRANTY_BOX).find("input[name\x3d'asin."+p+"']").val();e.checked&&(d="cy",a.$(c.WARRANTY_NOT_ADDED).hide(),a.$(c.WARRANTY_NOT_ADDED_T1).hide(),a.$("div[id^\x3dattach-no-warranty-alert-]").hide(),
a.$(b.selectedBaseLightningDeal?c.PANE_LD:c.PANE).find(c.WARRANTY_CHECKBOX).each(function(b){e!==this&&a.$(this).prop("checked",!1)}));h.logWarrantyWidgetInteraction({index:p,asin:f,action:d})}),a.$(c.WARRANTY_LEARN_MORE_HEADER).click(function(){h.logWarrantyInteractionData("LEARN_MORE_CLICK",this)}),a.$(c.WARRANTY_REVIEW_LINK).click(function(){h.logWarrantyInteractionData("REVIEW_CLICK",this)}),a.$(c.WARRANTY_DETAIL_PAGE_LINK).click(function(){h.logWarrantyInteractionData("DETAIL_PAGE_LINK_CLICK",
this)}),a.$(c.WARRANTY_POLICY_DOCUMENTS).click(function(){h.logWarrantyInteractionData("POLICY_DOCUMENTS_CLICK",this)}));a.$(c.PANE_NO_BUTTON).click(function(){e.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct();d.next()});e.isDssMbsEuComplianceActive()&&e.isDssMbsEnhancementEnabled()?a.$(c.PANE_ADD_BUTTON_LD_T1).click(function(){var b=function(b){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);r.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});
b=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);a.$(b).closest(c.WARRANTY_BOX).find("img.attach-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");d.next()},p=function(a){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);d.next()},k=a.$(this).find(".a-button-input").attr("name"),g=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(g&&g.name==k){var l=a.$(g).closest(c.WARRANTY_BOX);k=l.find("input[name\x3d'asin."+g.name+
"']").val();g=l.find("input[name\x3d'offerId."+g.name+"']").val();g={warrantyAsin:k,offeringId:g,addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1};g.baseItemAsin=a.$(c.BASE_ASIN).val();f.addLinkedWarranty(g,b,p)}else e.isLdDssMbsEnhancementEnabled()?a.$(this).closest(c.WARRANTY_BOX).find(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED+"-"+k).show()}):a.$(c.PANE_ADD_BUTTON_LD).click(function(){var b=function(b){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);r.when("EWC").execute("attach-everywhere-cart",
function(a){a.refresh()});e.isDssMbsEnhancementEnabled()?(b=a.$(c.WARRANTY_CHECKBOX+":checked").get(0),b=a.$(b).closest(c.WARRANTY_BOX).find("img.attach-warranty-image")):b=a.$("#attach-sheet-warranty-image");b.clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");d.next()},p=function(a){h.logCount(h.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);d.next()};if(e.isDssMbsEnhancementEnabled()){var k=a.$(c.WARRANTY_CHECKBOX+":checked").get(0);if(k){var g=
a.$(k).closest(c.WARRANTY_BOX),l=g.find("input[name\x3d'asin."+k.name+"']").val();k=g.find("input[name\x3d'offerId."+k.name+"']").val();l={warrantyAsin:l,offeringId:k,addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1};l.baseItemAsin=a.$(c.BASE_ASIN).val();f.addLinkedWarranty(l,b,p)}else e.isLdDssMbsEnhancementEnabled()?a.$(c.WARRANTY_NOT_ADDED_T1).show():a.$(c.WARRANTY_NOT_ADDED).show()}else l=a.$(c.PANE_ADD_BUTTON_LD).find("input"),l={warrantyAsin:l.attr("data-asin"),offeringId:l.attr("data-offering-id"),
addWarranty:1,quantity:a.$(c.ATC_DEAL_QUANTITY).val()||1},l.baseItemAsin=a.$(c.BASE_ASIN).val(),f.addLinkedWarranty(l,b,p)});a.$(c.PANE_NO_BUTTON_LD).click(function(){d.next()});a.off("attach:add-base-to-cart",l.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",l.onAttachAddBaseToCart)};l.show=function(){b.selectedBaseLightningDeal?b.selectedBaseLightningDeal&&a.$(c.PANE_LD).show():a.$(c.PANE).removeClass("aok-hidden");a.$(c.PANE).fadeIn(400,l.setFocus);e.isDssMbsEnhancementEnabled()?b.selectedBaseLightningDeal?
a.$(c.PANE_LD).find(c.WARRANTY_CHECKBOX).each(function(b){var d=a.$(this).closest(c.WARRANTY_BOX),e=d.find("input[name\x3d'asin."+b+"']").val();b=d.find("input[name\x3d'warrantyPrice."+b+"']").val();h.logWarrantyImpression(h.getWarrantyPayload(e,b))}):a.$(c.PANE).find(c.WARRANTY_CHECKBOX).each(function(){var a=b.getInputValueByNameAndIndex("asin",this.name),c=b.getInputValueByNameAndIndex("warrantyPrice",this.name);h.logWarrantyImpression(h.getWarrantyPayload(a,c))}):h.logWarrantyImpression(l.getWarrantyLoggingPayload());
a.$(c.PANE).find("h1").first().attr("id","attach-warranty-header");l.sheet&&l.sheet.$container&&l.sheet.$container.attr("aria-labelledby","attach-warranty-header")};l.hide=function(){a.$(c.PANE+", "+c.PANE_LD).fadeOut()};l.setFocus=function(){q.focusDescendant(a.$(c.PANE).get(0),"first");q.focusDescendant(a.$(c.PANE_LD).get(0),"first")};return l});"use strict";r.when("A","attach-common","attach-weblabs","attach-logging","attach-variant-registration","attach.utilities.focus-management","attach.amazonapi.client",
"attach.amazonapi.cart.add-items","attach.amazonapi.cart.summary","attach.amazonapi.deals.claim-and-add-to-cart","attach.amazonapi.products.productV2","attach.amazonapi.products.media-builder","attach.utilities.strings").register("attach-desktop-accessories-pane",function(a,b,h,f,e,d,q,l,c,k,p,v,C){function n(b){b=a.$('\x3cdiv class\x3d"a-alert-content"\x3e\x3c/div\x3e').append(b);var c=a.$('\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e');b=a.$('\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3c/div\x3e').append(c).append(b);
b=a.$('\x3cdiv class\x3d"a-box a-alert a-alert-error" role\x3d"alert"\x3e\x3c/div\x3e').append(b);return a.$('\x3cdiv class\x3d"attach-sidesheet-card attach-add-to-cart-message-card aok-hidden"\x3e\x3c/div\x3e').append(b)}var g={name:"accessories"},y=!0,A,D=!1;g.isEmptyAccessoryList=!1;var B=g.Endpoints={RENDER:"/gp/product/ajax?experienceId\x3dattach"},m=g.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",
ALM_ATC_BUTTON:".primary-VUZHIFdob2xlIEZvb2Rz-btn",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",
PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE:"#attach-cart-description-failure",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",
PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",PANE_CART_GENERIC_ERROR_MESSAGE:"#attach-string-cart-generic-error",PANE_CART_TRY_AGAIN_MESSAGE:"#attach-string-cart-try-again",
PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",
PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",
PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEAL_QUANTITY:"#dealx_quantity_dropdown",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},x=g.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};g.load=function(c){r.now("attach-external-atc-interceptor").execute(function(a){A=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var d=a.$.Deferred();r.now("dp-util-cookie").execute(function(c){c&&c("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(d,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",
information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+c("session-id")})});var u={asin:a.$(m.BASE_ASIN).val()};b.isWFMPage()&&h.isAttachEnabledForWFM()&&(u.fpw="alm",u.almBrandId=b.getAlmBrandId());u=a.$.get(B.RENDER,u);a.$.when(u).done(function(u){var e=a.$(u.trim());e.is(m.PANE)?(g.isEmptyAccessoryList=0===e.find(m.PANE_ACCESSORY_ASIN).length,g.isEmptyAccessoryList?b.rejectPromise(d,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE_INVALID_HTML",
information:"Failed to render DSS: Accessory list is empty"}):(c.$container.append(a.$(u).get(0)),d.resolve())):b.rejectPromise(d,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: Pane is missing"})}).fail(function(){b.rejectPromise(d,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});return d.promise()};g.onAttachAddBaseToCart=function(a){y=!1;b.isPromise(a)||(a=b.getPromiseFromDeferred(a));
a.then(g.handleAddBaseAndGetCartDescription).catch(function(a){r.logError(a,"Base product add to cart failed: ","ERROR","attach-desktop-accessories-pane");g.sheet.fail(b.FailureModes.ERROR_500)})};g.runOnceSetup=function(){D||(D=!0,a.declarative("attach-accessory-add","click",function(b){var c=b.$currentTarget,d=b.data,u=d.a,e=d.oid,p=d.isLightningDeal;d=d.isPEDOTD;f.logCount(f.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);f.beginLatencyCapture(f.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(m.PANE_CATEGORIZED_ACCESSORIES_CARD).data(m.PANE__DATA_CATEGORY_VIEW)?
a.$(b.$target).data(m.PANE__DATA_ASIN_INDEX):a.$(m.PANE_ACCESSORY_ADD_DECLARATIVES).index(c);p||d?g.addAccessoryToCartWithDeal(b,u,p):g.addAccessoryToCart(u,e,b)}))};g.setup=function(c){g.runOnceSetup();a.$(m.PANE).hide();g.sheet=c;a.off("attach:add-base-to-cart",g.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",g.onAttachAddBaseToCart);b.setupDesktopEgressButtons();a.$(m.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),d=a.$(this).attr("data-idx");
g.addAccessoryToCart(b,c,d)});a.$(m.PANE).find(m.PANE_CLOSE_BUTTON).appendTo(m.PANE_CART_BLOCK);a.$(m.PANE_CLOSE_BUTTON).click(c.next);a.$(m.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});h.isShowAccessoryCouponsDssEnabled()&&g.initializeCoupons();a.$(m.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;g.updateLightningDealTimer(b);g.initializeLightningDealStatusRefresher(b)});0===a.$(m.PANE_CART_GENERIC_ERROR_MESSAGE).length&&
a.$(m.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id","attach-string-cart-generic-error").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .a-alert-content span").first().text()));0===a.$(m.PANE_CART_TRY_AGAIN_MESSAGE).length&&a.$(m.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id","attach-string-cart-try-again").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .attach-add-to-cart-retry").first().text()))};
g.show=function(){b.selectedBaseLightningDeal||b.isWFMPage()||!y||b.addBaseProduct(function(a){a.request.isWarrantyAddedWithBase()&&("add-items.incomplete-add.error/v1"===a.response.type?f.logCount(f.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_INCOMPLETE):f.logCount(f.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_SUCCESS))},function(a){a.request.isWarrantyAddedWithBase()&&f.logCount(f.CSM_METRICS.WARRANTY_DESKTOP_ATC_BY_ACCESSORIES_PANE_FAILURE)});a.$(m.PANE).css({opacity:0}).show().animate({opacity:1},
500,"linear");if(b.selectedBaseLightningDeal)a.$(m.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(t).height()-161);else{var c=a.$(m.PANE_CART_BLOCK_INNER);c.find("div").addClass("aok-hidden");c.append(a.$(m.PANE_CART_SPINNER).removeClass("aok-hidden"))}g.initializeAccessoriesDisplay();r.now("attach-categorized-cards").execute(function(a){a!==z&&a.initializeCategorizedCards()})};g.hide=function(){a.$(m.PANE).hide();a.$(m.PANE_CART_SPINNER).addClass("aok-hidden");
a.$(m.PANE).find(m.ALM_ATC_BUTTON).removeClass("a-button-focus");a.$(m.PANE_HUC_MESSAGE).remove();a.$(m.PANE_ACCESSORY_ASIN).each(function(b,c){(c=a.$(c).data(m.PANE__DATA_ASIN_INDEX))&&(b=c);g.updateAccessoryStatus(b,x.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");A&&A.unloadAttachModule();a.trigger("aloha:detailPage:reappear");y=!0};g.updateNavCartDisplayQuantity=function(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",
1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)};g.createCartSubtotalLabelString=function(b){var c=a.$(1==b?m.PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:m.PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE).val();return C.substituteParameters(c,{quantity:b})};g.createProceedToCheckoutString=function(b){var c=a.$(1==b?m.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:m.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE).val();return C.substituteParameters(c,
{quantity:b})};g.updateCartSummary=function(){return c.get([c.CART_TYPE_RETAIL]).then(g.handleCartDescription).catch(g.handleCartDescriptionError)};g.updateALMCartSummary=function(){c.get([c.CART_TYPE_LOCAL_MARKET]).then(g.handleCartDescription).catch(g.handleCartDescriptionError)};g.handleAddBaseAndGetCartDescription=function(b){f.logCount(f.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);b.request?g.renderBaseProductStatus(b):(b=a.$(b),b.find("#sw-atc-confirmation").length?(g.renderFallbackSmartWagonFeedback(b),
g.renderFallbackSmartWagonBaseAddStatusIcon(b)):(g.renderHUCFeedback(b),g.renderBaseAddStatusIcon(b)));if(A)try{var c=a.$(m.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();A.loadAttachModule(c)}catch(F){r.logError(F,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}g.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");d.focusDescendant(a.$(m.PANE).get(0),"first");return g.updateCartSummary()};g.handleCartDescription=function(d){var e=
d.entity.summary[0]||c.EMPTY_CART_RETAIL,u=e.itemCount;e=q.formatMoney(e.subtotal);var p=g.createCartSubtotalLabelString(u),l=g.createProceedToCheckoutString(u);g.updateNavCartDisplayQuantity(u);a.$(m.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(p);a.$(m.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(e);a.$(m.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(l);a.$(m.PANE_CHECKOUT_BUTTON).removeClass("aok-hidden");a.$(m.PANE_VIEW_CART_BUTTON).removeClass("a-button-primary");a.$("#attach-customerId").val()&&r.when("attach-preinitiate-checkout").execute(function(a){b.cartInitiateId=
a.getCartInitiateId();a.preinitiateCheckout(b.cartInitiateId)});b.isAttachEnabledForWFM=h.isAttachEnabledForWFM();b.selectedBaseLightningDeal||(a.$(m.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(m.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(m.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).addClass("aok-hidden"));a.delay(g.revealIMBMessages,200);r.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});f.logCount(f.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);
return d};g.handleCartDescriptionError=function(c){r.logError(c,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");f.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE");b.selectedBaseLightningDeal||(a.$(m.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(m.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(m.PANE_CART_BLOCK_SUBTOTAL_LABEL).empty(),a.$(m.PANE_CART_BLOCK_SUBTOTAL_PRICE).empty(),a.$(m.PANE_CHECKOUT_BUTTON).addClass("aok-hidden"),a.$(m.PANE_VIEW_CART_BUTTON).addClass("a-button-primary"),
a.$(m.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).removeClass("aok-hidden"))};g.updateAccessoryStatus=function(b,c){a.$(m.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",c!==x.INITIAL);a.$(m.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",c!==x.ADDING);a.$(m.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",c!==x.SUCCESS);a.$(m.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",c!==x.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",
c!==x.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",c===x.SUCCESS);b=a.$("#attach-accessory-asin-"+(b+1)).parent();d.focusDescendant(b.get(0),"first")};g.addAccessoryToCart=function(c,d,e){g.updateAccessoryStatus(e,x.ADDING);var u=a.$(m.BASE_ASIN).val(),p=(b.selectedBaseLightningDeal?parseInt(a.$(m.DEAL_QUANTITY).val()):parseInt(a.$(m.QUANTITY).val()))||1,h=z;b.isDiscriminatedOffersEnabled()&&(h={itemAssociation:{programType:"Attach",renderType:"renderAll",associatedItemId:u,deleteConstraint:{mutuallyInclusive:!1}}});
l.addItems([{asin:c,offerListingId:d,quantity:p,additionalParameters:h}],"dp_atch_dss_atc_ce").then(function(a){if(a.type===l.RESPONSE_TYPE_SUCCESS)return g.updateCartSummary();r.logError(Error(a.entity.details.message),"Could not add accessory via AmazonAPI ("+c+"):","ERROR","attach-desktop-accessories-pane");throw a.entity.details.message;}).then(function(b){g.updateAccessoryStatus(e,x.SUCCESS);f.logAccessoryAddToCart(g.getAccessoryLoggingData(e));f.logCount(f.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);
a.trigger("UPSELL_ASIN_ADDED_TO_CART",e);r.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()})}).catch(function(){f.logCount(f.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);g.updateAccessoryStatus(e,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",e)})};g.addAccessoryToCartWithDeal=function(c,d,e){g.updateAccessoryStatus(c,x.ADDING);var u=a.$("#attach-accessory-claim-deal-url-"+c).val();u=g.getDealId(u);k.claimAndAddDeal(u,d,"dp_atch_dss_atc_ce").then(function(d){var u=d.entity;d=u.customerState;
if(!0!==u.claimed&&"INWAITLIST"!==d)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===d?a.$(m.PANE_ACCESSORY_ADD_SPINNER_PREFIX+c).addClass("aok-hidden"):g.updateAccessoryStatus(c,x.SUCCESS);f.logAccessoryAddToCart(g.getAccessoryLoggingData(c));f.logCount(f.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);e&&(u=u.msUntilExpiration,g.handleLightningDealAddToCart(c,u?u:900,d));a.trigger("UPSELL_ASIN_ADDED_TO_CART",c);r.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});
g.updateCartSummary()}).catch(function(){f.logCount(f.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);g.updateAccessoryStatus(c,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",c)})};g.getDealId=function(a){return(a=a.match(/\/api\/marketplaces\/\w+\/deals\/(.*?)\/claim-and-add-to-cart/))?a[1]:z};g.revealIMBMessages=function(){var b=a.$(m.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+
"px",position:"initial"}).animate({marginTop:"14px"},800)}};g.renderHUCFeedback=function(c){var d=c.find("#hlb-ship-message");c=a.$().add(c.find("#huc-v2-message-group")).add(c.find("#hlb-imb"));h.isCoreFreeShippingMessageEnabled()&&b.elementExists(d)&&a.$(m.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(d.html());0<c.length&&(d=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),d.append(c),d.insertAfter(m.PANE_CART_BLOCK),d.find(".a-declarative a").unwrap(),
d.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),d.find(".sc-action-quantity").hide(),(d=c.find(".a-alert-heading").text())&&f.logDSSWarningMessage(d))};g.renderBaseAddStatusIcon=function(c){var d;b.elementExists(c.find("#huc-v2-order-row-confirm-text"))?d=c.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(c.find("#hl-confirm-text"))&&(d=c.find("#hl-confirm-text").hasClass("a-alert-warning"));d=(d?a.$(m.PANE_CART_BASE_ERROR_ALERT):
a.$(m.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(m.PANE_CART_BASE_ALERT).remove();a.$(m.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=c.find(".huc-v2-order-row-image").clone();b.elementExists(d)||(d=c.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(e))for(var p=0;p<e.length;p++){var f=e[p].value,u=c.find("#huc-v2-order-row-item-"+
f);if(u.length){c=b.elementExists(u)?u.find(".huc-v2-order-row-image"):c.find(".hlb-item-link.hlb-asin-"+f+" \x3e img");d=d.add(c.clone());break}}}a.$(m.PANE_CART_BASE_HUC_IMAGE).remove();a.$(m.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};g.showAlmBaseAddToCartStatusIcon=function(b){b=(b?a.$(m.PANE_CART_BASE_ERROR_ALERT):a.$(m.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");b.removeClass("added-to-cart-message-box");
b.addClass("alm-added-to-cart-message-box");a.$(m.PANE_CART_BASE_ALERT).remove();a.$(m.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(b)};g.renderFallbackSmartWagonFeedback=function(b){b=b.find("#cart-important-message-box");if(0<b.length){var c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");c.append(b);c.find("#sc-important-message-alert").removeClass("a-spacing-medium-plus").addClass("a-spacing-mini");c.find(".sc-action-quantity").hide();c.insertAfter(m.PANE_CART_BLOCK)}};
g.renderFallbackSmartWagonBaseAddStatusIcon=function(b){var c=b.find(".sw-atc-message").first().parent().clone();c.prop("id","attachDisplayAddBaseAlert");c.addClass("sw-fallback");c.addClass("aok-hidden");a.$(m.PANE_CART_BASE_ALERT_IMAGE_AREA).empty();a.$(m.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);b.find("#add-to-cart-confirmation-image").find(".sc-product-image").clone().appendTo(m.PANE_CART_BASE_ALERT_IMAGE_AREA).wrap('\x3cdiv class\x3d"huc-image-wrapper aok-hidden sw-fallback"\x3e\x3c/div\x3e');
b=b.find(".sw-atc-extra-item").clone().appendTo(m.PANE_CART_BASE_ALERT_IMAGE_AREA);b.addClass("aok-hidden sw-fallback");b.find(".sw-atc-item-no").prepend('\x3cspan class\x3d"a-size-small"\x3e+\x3c/span\x3e')};g.renderBaseProductStatus=function(c){var d=c.response&&c.response.type===l.RESPONSE_TYPE_SUCCESS,e=c.response&&c.response.type===l.RESPONSE_TYPE_INCOMPLETE_ADD;e=!d&&!e;d=(d?a.$(m.PANE_CART_BASE_SUCCESS_ALERT):a.$(m.PANE_CART_BASE_ERROR_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");
a.$(m.PANE_CART_BASE_ALERT).remove();a.$(m.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);if((d=c.response&&c.response.entity&&c.response.entity.details&&c.response.entity.details.message)||e){var h=a.$("\x3cdiv\x3e\x3c/div\x3e");d?h.append(c.response.entity.details.message):h.append(a.$(m.PANE_CART_GENERIC_ERROR_MESSAGE).clone().removeClass("aok-hidden"));e&&h.append(a.$('\x3ca href\x3d"#"\x3e\x3c/a\x3e').click(function(a){a.preventDefault();f.logCount("ATTACH_DSS_BASE_PRODUCT_TRY_AGAIN_CLICKED");g.sheet.fail(b.FailureModes.RESUBMIT_BUY_BOX)}).append(a.$(m.PANE_CART_TRY_AGAIN_MESSAGE).clone().removeClass("aok-hidden")));
n(h).insertAfter(m.PANE_CART_BLOCK);a.delay(g.revealIMBMessages,200)}d=c.response&&c.response.entity&&c.response.entity.internalInfo&&c.response.entity.internalInfo.message;e&&f.logCount("ATTACH_DSS_BASE_PRODUCT_UNRECOVERABLE_FAILURE");d&&r.logError(Error(c.response.entity.internalInfo.message),"Error when trying to add the base product to cart: ","FATAL","attach-desktop-accessories-pane:renderBaseProductStatus");a.$(m.PANE_CART_BASE_HUC_IMAGE).remove();a.$(m.PANE_CART_BASE_INITIAL_IMAGE).hide();
var u=a.$(m.PANE_CART_BASE_INITIAL_IMAGE).parent();c=c.request.getAsins();p.getProductsBatch(c,[p.RESOURCE_INCLUSIONS.PRODUCT_IMAGES]).then(function(b){b.entities&&b.entities.forEach(function(b){if(b.type===p.RESPONSE_TYPE_SUCCESS){var c=b.entity;if(c&&c.productImages&&c.productImages.entity&&c.productImages.entity.images&&c.productImages.entity.images.length){var d=c.productImages.entity;b=d.altText;d=v.init(d.images[0].lowRes).scaleToSquare(60).build().url;c="/dp/"+c.asin;b=a.$("\x3cimg\x3e\x3c/img\x3e").attr("src",
d).attr("alt",b);b=a.$("\x3ca\x3e\x3c/a\x3e").attr("href",c).append(b);b=a.$("\x3cdiv\x3e\x3c/div\x3e").addClass("huc-image-wrapper").append(b)}else b=a.$();u.append(b)}})}).catch(function(a){r.logError(a,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");f.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE")})};g.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+
b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+
b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};g.createAccessoryImpressions=function(){var b=[];a.$(m.PANE_ACCESSORY_ASIN).parent().each(function(c,d){d=a.$(d);if(d.is(":hidden")||"hidden"===d.css("visibility")||d.prop("data-accessory-seen"))return null;d.prop("data-accessory-seen",!0);b.push(g.getAccessoryLoggingData(c))});
return b};g.resetAccessoryImpressions=function(){a.$(m.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};g.initializeAccessoriesDisplay=function(){g.initializeAccessoriesCards();g.initializeAccessoriesTiles();g.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){g.resetAccessoryImpressions();f.logAccessoryImpressions(g.createAccessoryImpressions())})};g.initializeAccessoriesCards=function(){a.$(m.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),c=b.find(m.PANE_ACCESSORY_CARD_SEE_MORE),
d=b.find(m.PANE_ACCESSORY_CARD_SEE_LESS),e=b.find(m.PANE_ACCESSORY_CARD_EXPAND_CONTENT);c.show();d.hide();e.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");c.click(function(){c.hide();d.show();e.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),f.logAccessoryImpressions(g.createAccessoryImpressions()));f.logCount(f.CSM_METRICS.ATTACH_SHOW_MORE)});
d.click(function(){d.hide();c.show();e.slideUp(400);b.prop("data-card-expanded",!1);f.logCount(f.CSM_METRICS.ATTACH_SHOW_LESS)})})};g.initializeAccessoriesTiles=function(){r.when("a-truncate").execute(function(b){a.$(m.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(m.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(m.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})});a.$(m.PANE_ACCESSORY_TILE_ITEM).attr("tabindex",0)};g.initializeCategorizedAccessoriesCards=
function(){b.elementExists(m.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",function(){f.logAccessoryImpressions(g.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){f.logAccessoryImpressions(g.createAccessoryImpressions())}))};g.initializeAccessoriesCarousel=function(){r.when("a-truncate","a-carousel-framework").execute(function(b,c){if(a.$(m.PANE_ACCESSORY_CAROUSEL).length){a.$(m.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});
c.createAll();var d=c.getCarousel(a.$(m.PANE_ACCESSORY_CAROUSEL));d&&(d.attachViewedPages=[1],d.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=d.getAttr("pageNumber"),-1===d.attachViewedPages.indexOf(a)&&(d.attachViewedPages.push(a),f.logAccessoryImpressions(g.createAccessoryImpressions())))}))}})};g.initializeCoupons=function(){var b;a.$(m.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");
a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",g.handleCouponPopoverPositionUpdated);a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(m.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=g.createCouponPopoverPositionHandler(c);a.$(t).bind("scroll",b);a.$(m.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(m.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");
a.$(t).unbind("scroll",b);a.$(m.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox","change",function(b){var c=b.data,d=b.$currentTarget.parents(m.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){g.handleCouponClaimSuccess(d,c.accessoryItemIndex)}).fail(function(a,b,c){r.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");g.handleCouponClaimError(d)}):(r.logError(Error("Coupon claim URL not available"),
"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),g.handleCouponClaimError(d))})};g.handleCouponPopoverPositionUpdated=function(a){a.popover.$container.css("z-index",6E3)};g.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};g.handleCouponClaimSuccess=function(a,b){f.logPromotionClaimed(g.getAccessoryLoggingData(b-1));a.find(m.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(m.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");
a=a.parents(m.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(m.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),a.find(m.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};g.handleCouponClaimError=function(a){a.find(m.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(m.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(m.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};g.updateLightningDealTimer=function(b){var c=
a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var d=g.convertTimeLeftToString(c);a.$("#attach-accessory-deal-timer-string-"+b).text(d);0===c?g.handleDealHasEnded(b):setTimeout(g.updateLightningDealTimer,1E3,b)};g.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?g.appendZeroIfSingleDigit(c)+":"+g.appendZeroIfSingleDigit(a):b+":"+g.appendZeroIfSingleDigit(c)+":"+g.appendZeroIfSingleDigit(a)};g.appendZeroIfSingleDigit=
function(a){return(10>a?"0":"")+a};g.handleDealHasEnded=function(b){a.$(m.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};g.updateLightningDealTimeToCheckoutTimer=function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+
b).val(c);var d=g.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(d);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+b).addClass("aok-hidden"),a.$(m.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(m.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(g.updateLightningDealTimeToCheckoutTimer,
1E3,b)};g.handleLightningDealAddToCart=function(b,c,d){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===d?a.$("#attach-accessory-deal-on-waitlist-"+b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),g.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};g.initializeLightningDealStatusRefresher=
function(b){if(h.isDcsDeprecated()){if(a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")){var c=a.$("#attach-accessory-asin-"+(b+1)).val();p.getProduct(c,[p.RESOURCE_INCLUSIONS.DEAL_DETAILS]).then(function(c){c=c.entity.buyingOptions.filter(function(a){return"LIGHTNING_DEAL"===a.type});c.length&&c[0].dealDetails.entity&&(c=c[0].dealDetails.entity,g.updateLightningDealInfo(b,c.state,c.percentClaimed)&&a.delay(g.initializeLightningDealStatusRefresher,3E4,b))})}}else if(a.$("#attach-accessory-deal-has-ended-"+
b).hasClass("aok-hidden")){c=a.$("#attach-accessory-claim-deal-url-"+b).val();var d=g.getDealId(c);d!==z&&(c=[{dealID:d}],c=JSON.stringify({requestMetadata:{marketplaceID:a.$(m.MARKETPLACE_ID).val(),clientID:"DetailPageAttachAssets",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:c,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:c,
success:function(a){a=a.dealStatus[d];var c=Number.MAX_VALUE;a&&g.updateLightningDealInfo(b,a.dealState,a.percentClaimed)&&setTimeout(g.initializeLightningDealStatusRefresher,c<a.msCacheTtl?c:3E4,b)}}))}};g.updateLightningDealInfo=function(b,c,d){if("AVAILABLE"!==c&&"WAITLIST"!==c)return g.handleDealHasEnded(b),!1;var e=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===c?e.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&e.html(a.$("#attach-accessory-add-to-cart-string").html());
a.$("#attach-accessory-percent-claimed-"+b).text(d);a.$("#attach-accessory-deal-progress-bar-width-"+b).width(d+"%");return!0};return g});"use strict";r.when("A","attach-logging","attach-common","attach-weblabs","attach.utilities.focus-management").register("attach-desktop-side-sheet",function(a,b,h,f,e){var d={},q=[],l=-1,c,k,p,v,r,n,g=null,y=null,A=null,D=!1,B=null,m="false",x="auto",u=null,w=d.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",
MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox",WARRANTY_BOX:".attach-warranty-box",WARRANTY_MONTHLY:"#attach-monthly-warranty",WARRANTY_MULTI_DEVICE:"#attach-warranty-multi-device-container"};d.transitionDuration=500;d.onKeyDown=function(a){27===a.which&&d.next()};d.initialize=function(){q=[];h.elementExists(w.MODAL_LAYER)?v=a.$(w.MODAL_LAYER):(v=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),v.hide(),v.appendTo(document.body));h.elementExists(w.SHEET)?d.$container=
a.$(w.SHEET):(d.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),d.$container.addClass("aok-hidden"),d.$container.appendTo(w.PLACEHOLDER));g=d.$container.parent();h.elementExists(w.LIGHTBOX)||(r=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'attach-dss-backdrop'\x3e\x3c/div\x3e"),r.hide(),r.appendTo(v),r.click(d.next));a.$(document).unbind("keydown",d.onKeyDown);a.$(document).keydown(d.onKeyDown);c=function(){};k=function(){};
p=!0};d.setFailureHandler=function(a){c=a};d.setCloseHandler=function(a){k=a};d.fail=function(a,b){c(a,b)};d.addPane=function(a){q.push(a)};d.removePane=function(a){a=q.indexOf(a);-1<a&&q.splice(a,1)};d.hideMultiQuantityMonthlyWarranties=function(b){var c=h.selectedBaseLightningDeal?a.$("#attach-warranty-pane-ld "+w.WARRANTY_BOX):a.$("#attach-warranty-pane "+w.WARRANTY_BOX),e=c.has("[id\x3dattach-monthly-warranty]");a.$(w.WARRANTY_MULTI_DEVICE).addClass("aok-hidden");e.addClass("aok-hidden");e.length===
c.length&&d.removePane(b)};d.showMonthlyWarranties=function(){var b=(h.selectedBaseLightningDeal?a.$("#attach-warranty-pane-ld "+w.WARRANTY_BOX):a.$("#attach-warranty-pane "+w.WARRANTY_BOX)).has("[id\x3dattach-monthly-warranty]");a.$(w.WARRANTY_MULTI_DEVICE).removeClass("aok-hidden");b.removeClass("aok-hidden")};d.getPaneIndex=function(a){return q.indexOf(a)};d.insertPane=function(a,b){b===z&&(b=q.length);q.splice(b,0,a);p=!0};d.hasPane=function(a){return-1<d.getPaneIndex(a)};d.next=function(){if(l+
1===q.length){r.hide();d.$container.animate({right:n},{duration:d.transitionDuration,complete:function(){var a=q[l];a&&a.hide?a.hide():b.logError("Unable to hide current pane. Index: "+l);l=-1;k();v.hide();u.focus();d.$container.appendTo(g)}});t.ue&&t.ue.count&&t.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(t.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);var c=a.$(w.PAGE_BACKGROUND).get(0);document.body.style.overflow=x;c.ariaHidden=m;y.remove();A.remove();a.$("#attach-ld-image-container").first().children().not(":nth-child(1)").remove();
a.trigger("HIDE_SIDE_SHEET")}else-1!==l&&(q[l].hide(),q[l+1].show(),l+=1)};d.show=function(){if(p){p=!1;var b=a.$.map(q,function(a){return a.load(d)});a.$.when.apply(a.$,b).fail(d.fail).done(function(){a.$.each(q,function(a,b){b.setup(d)});d.show()})}else{v.show();d.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(v);l=0;q[l].show();n=d.$container.css("right");d.$container.removeClass("aok-hidden");d.$container.animate({right:"0"},d.transitionDuration,"linear");
r.show();t.ue&&t.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",t.ue.count(b,(t.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",t.ue.count(b,(t.ue.count(b)||0)+1));b=document.body;var c=a.$(w.PAGE_BACKGROUND).get(0);m=c.ariaHidden;c.ariaHidden="true";x=b.style.overflow;b.style.overflow="hidden";u=document.activeElement;y=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(d.$container);
A=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(d.$container);a.trigger("attach:show_side_sheet")}};d.isEmpty=function(){return 0===q.length};document.addEventListener("focus",function(a){if(!D&&-1!==l){var b=d.$container.get(0);b.contains(a.target)?B=a.target:(D=!0,e.focusDescendant(b,"first"),B===document.activeElement&&e.focusDescendant(b,"last"),D=!1,B=document.activeElement)}},!0);d.isOpen=function(){return-1!==l};return d});"use strict";r.when("A","attach-common","attach-weblabs",
"attach-logging","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,b,h,f,e,d,q,l){function c(){return b.elementExists(q.Selectors.PLACEHOLDER)?b.elementExists(n.STS_FEATURE)?(y||(f.logCount("attachSuppressForShipToStoreFeature"),y=!0),!0):!1:!0}var k={},p,v=k.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",
LD_CLAIM_SUCCESS:"deals_claimDealSuccess",LD_CLAIM_ERROR:"deals_claimDealError"},C=k.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},n=k.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ASIN:"#ASIN,#asin",QUANTITY:"#quantity",DEAL_QUANTITY:"#dealx_quantity_dropdown",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",
MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc",ALM_BRAND_ID:"#attach-alm-brand-id",STS_FEATURE:"#addProfessionalServicesRow"},g=k.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},y=!1,A=function(){a.off(v.LD_CLAIM_SUCCESS,A);a.off(v.LD_CLAIM_ERROR,z);b.selectedBaseLightningDeal=!0;q.setCloseHandler(k.setupAddToCartButton);
k.handleLdAddToCartClick();r.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},z=function(){a.off(v.LD_CLAIM_ERROR,z);a.off(v.LD_CLAIM_SUCCESS,A);a.$(n.LD_ATC_BUTTON).bind(v.CLICK,B)},B=function(){a.$(n.LD_ATC_BUTTON).unbind(v.CLICK,B);a.on(v.LD_CLAIM_SUCCESS,A);a.on(v.LD_CLAIM_ERROR,z)};k.initialize=function(){if(c())return!1;k.setupDependencies();k.setupSideSheet();k.setupAddToCartButton()};k.setupDependencies=function(){var b=a.$(n.ATTACH_MARKETPLACE_ID).val();f.initialize(f.FEATURES.DSS,
b);f.setPayloadBuilder(function(){return{baseAsin:a.$(n.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(n.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(n.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(n.QUANTITY).val())||1,almBrandId:a.$(n.ALM_BRAND_ID).val()||null}});r.when("attach-external-atc-interceptor").execute(function(a){p=a;p.enableModule()})};k.setupSideSheet=function(){q.initialize();q.setFailureHandler(k.failure);!h.isWarrantyPaneSuppressed()&&b.hasWarranty()&&
q.addPane(e);!h.servicesInterstitialDeprecated()||b.hasAccessories()?(q.addPane(d),q.setCloseHandler(k.setupAddToCartButton)):q.setCloseHandler(k.failureTransitionToHUC)};k.setupAddToCartButton=function(){a.$(document.body).delegate(n.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE,k.handleAddToCartClick);a.$(n.ADD_TO_CART_BUTTON).prop("type","button").addClass(g.ATTACH_DSS_ATC);f.logCount(f.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};k.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:k.failureError500();
break;case b.FailureModes.RESUBMIT_BUY_BOX:k.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:k.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:k.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:k.failureTransitionToHUC()}};k.failureError500=function(){t.location=C.ERROR_500_URL};k.failureResubmitBuyBox=function(){b.selectedBaseLightningDeal?k.failureRebindATC():(k.failureUnbindATC(),b.buyButton.click())};k.failureUnbindATC=function(){a.$(document.body).undelegate(n.ADD_TO_CART_BUTTON,
v.ATTACH_ATC_CLICK_NAMESPACE);a.$(n.ADD_TO_CART_BUTTON).prop("type","submit")};k.failureTransitionToHUC=function(){if(b.selectedBaseLightningDeal)return k.failureUnbindATC();h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(n.ADD_TO_CART_BUTTON,v.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(n.ADD_TO_CART_BUTTON,v.WARRANTY_SI_CLICK_NAMESPACE);k.failureResubmitBuyBox()};k.failureRebindATC=function(){k.setupAddToCartButton()};k.handleAddToCartClick=function(c){b.buyButton=a.$(c.target);
a.$(document.body).undelegate(n.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);b.elementExists(n.LD_BUY_BOX)&&a.$(n.LD_ATC_BUTTON).unbind(v.CLICK,B);b.selectedBaseLightningDeal||!h.servicesInterstitialDeprecated()||b.hasAccessories()||q.setCloseHandler(k.failureTransitionToHUC);a.$.when().pipe(k.checkWarranty).pipe(k.checkFeatureExists).pipe(k.show).fail(k.failure);c.preventDefault();c.stopImmediatePropagation();return!1};k.handleLdAddToCartClick=function(){a.$(document.body).undelegate(n.ADD_TO_CART_BUTTON,
v.ATTACH_ATC_CLICK_NAMESPACE);a.$(n.LD_ATC_BUTTON).unbind(v.CLICK,B);a.$.when().pipe(k.checkWarranty).pipe(k.checkFeatureExists).pipe(k.show).fail(k.failure)};k.checkFeatureExists=function(){if(k.shouldSuppressForFeatureNotPresent())return b.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};k.checkWarranty=function(){if(!h.isWarrantyPaneSuppressed()){var c=
h.isDssMbsEnhancementEnabled()?a.$("#attach-warranty-ld .attach-warranty-box").length:a.$("#attach-warranty-ld #attach-warranty-asin").val();!b.selectedBaseLightningDeal||a.$("#atch__bl").length&&c?k.shouldSuppressForWarrantyInMbb()?(q.removePane(e),f.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1)):b.elementExists(".mbb__mdbi")?q.removePane(e):h.servicesInterstitialDeprecated()&&k.shouldSuppressforMultiQuantityMonthlyWarranty()?(h.isDssMbsEnhancementEnabled()?q.hideMultiQuantityMonthlyWarranties(e):
q.removePane(e),f.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1)):h.isDssMbsEnhancementEnabled()&&q.showMonthlyWarranties():(q.getPaneIndex(e),q.removePane(e))}};k.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(q.removePane(e),f.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};k.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};
k.shouldSuppressForFeatureNotPresent=function(){return h.servicesInterstitialDeprecated()?!b.elementExists(q.Selectors.PLACEHOLDER)||q.isEmpty():!b.elementExists(q.Selectors.PLACEHOLDER)||!b.hasAccessories()||!b.elementExists(n.ATTACH_MARKETPLACE_ID)||!b.elementExists(n.ATTACH_BASE_ASIN)};k.shouldSuppressForWarrantyInMbb=function(){return h.isWarrantyTwisterPlusDesktopEnabled()?0<a.$(n.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(n.WTY_TWISTER_SELECTED_GROUP).filter(n.WTY_TWISTER_WTY_OPTION).length:
0<a.$(n.MBB_WARRANTY_ITEM).filter(":checked").length};k.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var c=h.isLdDssMbsEnhancementEnabled()&&b.selectedBaseLightningDeal?Number(a.$(n.DEAL_QUANTITY).val())||1:Number(a.$(n.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&1<c};k.show=function(){q.show()};a.on("a:popover:show:dss-basisprice-legal-message",function(a){a.popover.$container.css("z-index",6E3)});return k});r.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",
function(a,b,h){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";r.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,h){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(h("session-id"))});"use strict";r.when("A","attach-logging","ready").register("attach-categorized-cards",function(a,b){var h=self.Selectors={CATEGORIZED_ACCESSORIES_PANE:"#attach-categorized-accessories",
CATEGORIZED_ACCESSORIES_SEE_MORE:".category-see-more",CATEGORIZED_ACCESSORIES_SEE_LESS:".category-see-less",CATEGORIZED_CARD_EXPAND_CONTENT:".card-expand-content",CATEGORIZED_CARD_EXPANDABLE:".card-expandable",CATEGORIZED_CARD_CATEGORY:".card-category"},f=self.Constants={CATEGORY_CARD_EXPANDED:"category-card-expanded",CATEGORY_CARD_PREVIOUSLY_EXPANDED:"category-card-previously-expanded"};self.initializeCategorizedCards=function(){a.$(h.CATEGORIZED_ACCESSORIES_PANE+h.CATEGORIZED_CARD_EXPANDABLE+" "+
h.CATEGORIZED_CARD_CATEGORY).each(function(){var e=a.$(this),d=e.find(h.CATEGORIZED_ACCESSORIES_SEE_MORE),q=e.find(h.CATEGORIZED_ACCESSORIES_SEE_LESS),l=e.find(h.CATEGORIZED_CARD_EXPAND_CONTENT);d.show();q.hide();l.hide();e.removeProp(f.CATEGORY_CARD_EXPANDED);e.removeProp(f.CATEGORY_CARD_PREVIOUSLY_EXPANDED);d.click(function(){d.hide();q.show();l.slideDown(400);e.prop(f.CATEGORY_CARD_EXPANDED,!0);e.parent().animate({scrollTop:e.get(0).offsetTop-30},400);b.logCount(b.CSM_METRICS.ATTACH_SHOW_MORE)});
q.click(function(){q.hide();d.show();l.slideUp(400);e.prop(f.CATEGORY_CARD_EXPANDED,!1);b.logCount(b.CSM_METRICS.ATTACH_SHOW_LESS)})})};return self});"use strict";r.when("A","attach-logging","attach-weblabs").register("attach-secondary-side-sheet",function(a,b,h){var f=a.$;h={name:"secondary-side-sheet"};var e={},d=h.Utilities={},q,l,c=h.AuiConstants={AUI_SPINNER:".a-spinner-wrapper",AOK_HIDDEN:"aok-hidden"},k=h.Htmltags={LI:"li",IMG:"img",IMG_SRC:"src",IMG_ALT:"alt",INPUT:"input",DATA_ASININDEX:"asinindex"},
p=h.CssProsVal={CSS_DISPLAY:"display",CSS_DISPLAY_INLINE_BLOCK:"inline-block",CSS_WIDTH:"width",CSS_HEIGHT:"height"},v=h.Declarative={ATTACH_ACCESSORY_MINI_DP:"attach_accessory_mini_dp",MINI_DP_ATC:"mini_dp_add_to_cart",MINI_DP_BACK_BUTTON:"mini_dp_back_button",MINI_DP_NO_THANKS:"mini_dp_no_thanks"},r=h.Events={UPSELL_ASIN_ADDED_TO_CART:"UPSELL_ASIN_ADDED_TO_CART",UPSELL_ASIN_NOT_ADDED_TO_CART:"UPSELL_ASIN_NOT_ADDED_TO_CART",HIDE_SIDE_SHEET:"HIDE_SIDE_SHEET",CLICK:"click",ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY:"LOADED_ACCESSORIES_PANE_SUCCESSFULLY",
RESET_SECONDARY_SIDE_SHEET_MODULE:"RESET_SECONDARY_SIDE_SHEET_MODULE"},n=h.Selectors={PANE_ACCESORIES_CARD:"#attach-accessories",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_DISPLAY:".attach-accessory-display-row, .attach-accessory-tile",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",BASE_ASIN:"#ASIN",SECONDARY_SIDE_SHEET:".secondary-side-sheet",
BACK_BUTTON:".back-button",MINI_DP_VIEW:".miniDp-view",MINI_DP_RESPONSE:".miniDpResponse",ASIN_TITLE:".asin-title",ASIN_REVIEW:".asin-review",ASIN_REVIEW_ROW:".asin-review-row",DELIVERY_BADGE:".delivery-badge-message",DELIVERY_BADGE_ROW:".delivery-badge-message-row",PRICE_OFFER_ROW:".price-offer-row",ASIN_OFFER_PRICE:".asinOfferPrice",PRODUCT_IMAGE_MAIN:".productImageMain",PRODUCT_IMAGES_LIST:".productImagesList",FEATURE_BULLET_POINTS:".featureBulletPoints",MINI_DP_PRODUCT_FEATURES:".mini_dp_product_features",
MINI_DP_IMG_THUMBNAIL_LIST:".imgThumbnailList",MINI_DP_ACTION_BUTTONS:".miniDp_action_buttons",MINI_DP_ACTION_BUTTONS_STATES:".miniDp-action-buttons-states",MINI_DP_ADD_ACCESSORY_ALERT:"#miniDp_attach_add_accessory_alert",MINI_DP_ADD_ACCESSORY_ERROR:"#miniDp_attach_add_accessory_error",MINI_DP_ADD_TO_CART_RETRY:".attach-add-to-cart-retry",MINI_DP_ADD_ACCESSORY_ASIN:"#attach-minidp-accessory-asin"},g=h.RefTags={MINI_DP_SUCCESSFUL_LOAD:"dp_atch_dss_ss_ce_",MINI_DP_ADD_ACCESSORY_CLICK:"dp_atch_dss_atc_ce_",
MINI_DP_BACK_BUTTON_CLICK:"dp_atch_dss_ss_back_ce_",MINI_DP_NO_THANKS_CLICK:"dp_atch_dss_ss_nt_ce_",MINI_DP_ADD_TO_CART_SUCCESS:"dp_atch_dss_atc_success_ce_",MINI_DP_ADD_TO_CART_FAILURE:"dp_atch_dss_atc_fail_ce_"},t=h.MiniDpAjax={ENDPOINT:"/gp/product/ajax?experienceId\x3dminidp",MINI_DP_AJAX_ENDPOINT:"/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?",MINI_DP_AJAX_TAB:"\x26activeTab\x3d0",TEXT_STATUS_SUCCESS:200};d.showHideSpinner=function(b){b?a.$(c.AUI_SPINNER).show():a.$(c.AUI_SPINNER).hide()};
d.isCategoryView=function(){return a.$(n.PANE_CATEGORIZED_ACCESSORIES_CARD).length?!0:!1};d.showSecondarySideSheet=function(b){b?(d.isCategoryView()?a.$(n.PANE_CATEGORIZED_ACCESSORIES_CARD).hide():a.$(n.PANE_ACCESORIES_CARD).hide(),a.$(n.SECONDARY_SIDE_SHEET).slideDown(1E3),d.showHideSpinner(!0),a.$(n.BACK_BUTTON).show(),a.$(n.SECONDARY_SIDE_SHEET+" "+n.MINI_DP_VIEW).hide()):(d.isCategoryView()?a.$(n.PANE_CATEGORIZED_ACCESSORIES_CARD).slideDown(2E3):a.$(n.PANE_ACCESORIES_CARD).slideDown(2E3),a.$(n.BACK_BUTTON).hide(),
a.$(n.SECONDARY_SIDE_SHEET).hide())};h.init=function(){a.declarative(v.ATTACH_ACCESSORY_MINI_DP,r.CLICK,function(h){function A(){f(n.MINI_DP_VIEW+" "+n.MINI_DP_IMG_THUMBNAIL_LIST+" "+k.LI).hover(function(a){a=f(this).find(k.IMG).attr(k.IMG_SRC);f(n.MINI_DP_VIEW+" "+n.PRODUCT_IMAGE_MAIN+" "+k.IMG).attr(k.IMG_SRC,a);b.logCount(b.CSM_METRICS.MINI_DP_CAROUSEL_THUMBNAIL_CHANGE)})}function y(){d.showSecondarySideSheet(!1);var c=f(n.SECONDARY_SIDE_SHEET).data(k.DATA_ASININDEX);c in e||(a.$(n.PANE_ACCESSORY_ADD_BUTTON_PREFIX+
c).find(k.INPUT).click(),e[c]=!0,b.logSecondarySheetRefTag(g.MINI_DP_ADD_ACCESSORY_CLICK+E+"_"+w.upsellasin),b.logCount(b.CSM_METRICS.MINI_DP_ATC),b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME))}function m(){var a=f(n.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+E).css(p.CSS_DISPLAY),b=f(n.PANE_ACCESSORY_ADD_ERROR_PREFIX+E).css(p.CSS_DISPLAY);a===p.CSS_DISPLAY_INLINE_BLOCK?(f(n.MINI_DP_ACTION_BUTTONS_STATES+" "+n.MINI_DP_ADD_ACCESSORY_ALERT).removeClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS_STATES+
" "+n.MINI_DP_ADD_ACCESSORY_ERROR).addClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS).addClass(c.AOK_HIDDEN)):b===p.CSS_DISPLAY_INLINE_BLOCK?(f(n.MINI_DP_ACTION_BUTTONS_STATES+" "+n.MINI_DP_ADD_ACCESSORY_ERROR).removeClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS_STATES+" "+n.MINI_DP_ADD_ACCESSORY_ALERT).addClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS).addClass(c.AOK_HIDDEN)):(f(n.MINI_DP_ACTION_BUTTONS_STATES+" "+n.MINI_DP_ADD_ACCESSORY_ALERT).addClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS_STATES+
" "+n.MINI_DP_ADD_ACCESSORY_ERROR).addClass(c.AOK_HIDDEN),f(n.MINI_DP_ACTION_BUTTONS).removeClass(c.AOK_HIDDEN))}function x(){a.$(n.MINI_DP_VIEW+" "+n.ASIN_TITLE).html(C);a.$(n.MINI_DP_VIEW+" "+n.ASIN_REVIEW).html(G);a.$(n.MINI_DP_VIEW+" "+n.DELIVERY_BADGE).html(H);a.$(n.MINI_DP_VIEW+" "+n.PRICE_OFFER_ROW).html(I);a.$(n.MINI_DP_VIEW+" "+n.ASIN_OFFER_PRICE).html(J);var b=a.$(n.MINI_DP_RESPONSE+" "+n.PRODUCT_IMAGES_LIST+" "+k.LI+" "+k.IMG);b=a.$(b).map(function(){return a.$(this).attr(k.IMG_SRC)});
f(n.MINI_DP_VIEW+" "+n.PRODUCT_IMAGE_MAIN+" "+k.IMG).attr(k.IMG_SRC,b[0]);f(n.MINI_DP_VIEW+" "+n.PRODUCT_IMAGE_MAIN+" "+k.IMG).attr(k.IMG_ALT,b[0]);b=f(n.MINI_DP_RESPONSE+" "+n.PRODUCT_IMAGES_LIST).clone();f(n.MINI_DP_VIEW+" "+n.MINI_DP_IMG_THUMBNAIL_LIST).html(b[0]);A();f(n.MINI_DP_VIEW+" "+n.MINI_DP_IMG_THUMBNAIL_LIST+" "+k.IMG).each(function(){f(this).removeAttr(p.CSS_WIDTH).removeAttr(p.CSS_HEIGHT)});b=f(n.MINI_DP_RESPONSE+" "+n.FEATURE_BULLET_POINTS).clone();f(n.MINI_DP_VIEW+" "+n.MINI_DP_PRODUCT_FEATURES).html(b);
m()}a.$(h.$target).attr("id");var u=a.$(h.$declarativeParent);h=a.$(h.$target).closest(n.PANE_ACCESSORY_DISPLAY);var w=a.$(u).data(v.ATTACH_ACCESSORY_MINI_DP),C=w.title,G=a.$(h).find(n.ASIN_REVIEW_ROW).html(),H=a.$(h).find(n.DELIVERY_BADGE_ROW).html(),I=a.$(h).find(n.PRICE_OFFER_ROW).html(),J=w.offerprice,E=w.asinIndex;l=E;q=w.upsellasin;f(n.MINI_DP_ADD_ACCESSORY_ASIN).val(q);f(n.SECONDARY_SIDE_SHEET).data(k.DATA_ASININDEX,E);d.showSecondarySideSheet(!0);b.logCount(b.CSM_METRICS.MINI_DP_OPEN);b.beginLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME);
a.get(t.ENDPOINT,{params:{asin:w.upsellasin},success:function(c,e,p){p.http.status===t.TEXT_STATUS_SUCCESS&&c!==z&&(a.$(n.SECONDARY_SIDE_SHEET+" "+n.MINI_DP_RESPONSE).html(c),x(),d.showHideSpinner(!1),a.$(n.SECONDARY_SIDE_SHEET+" "+n.MINI_DP_VIEW).show());a.declarative(v.MINI_DP_ATC,r.CLICK,y);f(n.MINI_DP_VIEW+" "+n.MINI_DP_ADD_TO_CART_RETRY).unbind(r.CLICK).bind(r.CLICK,y);b.logSecondarySheetRefTag(g.MINI_DP_SUCCESSFUL_LOAD+E+"_"+w.upsellasin)},error:function(a,b,c){d.showSecondarySideSheet(!1)}})});
a.declarative(v.MINI_DP_BACK_BUTTON,r.CLICK,function(a){d.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(g.MINI_DP_BACK_BUTTON_CLICK+l+"_"+q);b.logCount(b.CSM_METRICS.MINI_DP_BACK);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.declarative(v.MINI_DP_NO_THANKS,r.CLICK,function(a){d.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(g.MINI_DP_NO_THANKS_CLICK+l+"_"+q);b.logCount(b.CSM_METRICS.MINI_DP_CANCEL);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.on(r.UPSELL_ASIN_ADDED_TO_CART,
function(a){a in e||(e[a]=!0);b.logSecondarySheetRefTag(g.MINI_DP_ADD_TO_CART_SUCCESS+l+"_"+q);b.endLatencyCapture(b.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY)});a.on(r.UPSELL_ASIN_NOT_ADDED_TO_CART,function(a){a in e&&delete e[a];b.logSecondarySheetRefTag(g.MINI_DP_ADD_TO_CART_FAILURE+l+"_"+q)});a.on(r.HIDE_SIDE_SHEET,function(){d.showSecondarySideSheet(!1)})};h.resetSecondarySideSheet=function(){e={}};a.on(r.ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY,h.init);a.on(r.RESET_SECONDARY_SIDE_SHEET_MODULE,
h.resetSecondarySideSheet);return h});"use strict";r.when("A","3p-promise","attach.utilities.price-formatter").register("attach.amazonapi.client",function(a,b,h){var f={buildRequestUrl:function(b){var d=a.$("#attach-aapi-ajax-endpoint").val()+"/"+b.apiPath,e=[];if(b.additionalParameters)for(var f in b.additionalParameters)b.additionalParameters.hasOwnProperty(f)&&e.push(f+"\x3d"+encodeURIComponent(b.additionalParameters[f]));e.length&&(d+="?"+e.join("\x26"));return d},buildAcceptHeader:function(a){var b=
["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildRequestHeaders:function(b){var d=a.$("#attach-aapi-ajax-csrf-token").val();d={Accept:f.buildAcceptHeader(b),"Accept-Language":a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"),"x-cc-currency-of-preference":a.$("#attach-currency-of-preference").val(),"x-api-csrf-token":d};var e=a.$('meta[name\x3d"encrypted-slate-token"]');
e.length&&e.attr("content")?(t.ue.count("attachAjaxSlateTokenPresent",1),d["x-amzn-encrypted-slate-token"]=e.attr("content")):t.ue.count("attachAjaxSlateTokenAbsent",1);b.requestType&&(d["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+b.requestType+'"');return d},makeRequest:function(e){return new b(function(b,h){var d=f.buildRequestUrl(e),c=f.buildRequestHeaders(e),k=e.data?JSON.stringify(e.data):z;return a.$.ajax({type:e.method,url:d,headers:c,data:k,xhrFields:{withCredentials:!0},
dataType:"json",success:function(a){b(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(C){b.data=a.responseText}h(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&"undefined"!==typeof a.xhr},formatMoney:function(b){return b.displayString?b.displayString:b.convertedFrom&&b.currencyCode===b.convertedFrom.currencyCode&&b.convertedFrom.displayString?b.convertedFrom.displayString:h.formatPrice(Number(b.amount),
b.currencyCode||a.$("#attach-currency-of-preference").val(),a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"))}};return f});"use strict";r.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",function(a){var b={RESPONSE_TYPE_SUCCESS:"cart.add-items/v1",RESPONSE_TYPE_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"},h=function(a){return a},f=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;
};b.addItems=function(b,d){b={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:b},additionalParameters:{}};d&&(b.additionalParameters.ref=d);return a.makeRequest(b).then(h).catch(f)};return b});"use strict";r.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(b,h){b={apiPath:"cart/items",requestType:"cart.items.request/v1",responseType:"cart.items/v1",method:"GET",
additionalParameters:b};h&&(b.additionalParameters.ref=h);return a.makeRequest(b)}}});"use strict";r.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var b={CART_TYPE_RETAIL:"RETAIL",CART_TYPE_LOCAL_MARKET:"LOCAL_MARKET",EMPTY_CART_RETAIL:{itemCount:0,lastModified:null,cartType:"RETAIL",subtotal:{amount:0}}},h=function(a){return a};b.get=function(b){var e={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(e.additionalParameters.cartTypes=
b);return a.makeRequest(e).then(h)};return b});"use strict";r.when("attach.amazonapi.client").register("attach.amazonapi.deals.claim-and-add-to-cart",function(a){var b={RESPONSE_TYPE_SUCCESS:"deals.claim.response/v1",RESPONSE_TYPE_QUANTITY_ERROR:"deal.claim.quantity_restriction_violation.error/v1",RESPONSE_TYPE_ERROR:"error/v1"},h=function(a){return a},f=function(a){throw a;};b.claimAndAddDeal=function(b,d,q){b={apiPath:"deals/"+b+"/claim-and-add-to-cart",requestType:"deals.claim.request/v1",responseType:"deals.claim.response/v1",
method:"POST",data:{asin:d,quantity:1},additionalParameters:{}};q&&(b.additionalParameters.ref=q);return a.makeRequest(b).then(h).catch(f)};return b});"use strict";r.when("A").register("attach.amazonapi.products.media-builder",function(a){var b={},h,f,e,d,q,l,c,k;b.init=function(a){h=a;q=d=e=f=z;l=h.width;c=h.height;k=[];h.styleCode&&k.push(encodeURIComponent(h.styleCode));return b};b.cdn=function a(a){f=a;return b};b.withNameAndOU=function(a,c,f){e=a.startsWith("/")?a.substring(1):a;d=1===c.length?
"0"+c:c;q=f;return b};b.crop=function(a,d,e,f){l=Math.round(Math.min(e,l-a));c=Math.round(Math.min(f,c-d));k.push("_CR"+[a,d,e,f].join());return b};b.autoCrop=function(){k.push("_AC");return b};b.blur=function(a){k.push("_BL"+a);return b};b.scaleToRectangle=function(a,d){l=a;c=d;k.push("_SR"+a+","+d);return b};b.scaleToSquare=function(a){c=l=a;k.push("_SS"+a);return b};b.scaleToWidth=function(a){l>a&&(c=Math.round(a*c/l),l=Math.round(a));k.push("_SX"+a);return b};b.scaleToHeight=function(a){c>a&&
(l=Math.round(a*l/c),c=Math.round(a));k.push("_SY"+a);return b};b.scaleToLongest=function(a){l>c?a<l&&(c=Math.round(a*c/l),l=Math.round(a)):a<c&&(l=Math.round(a*l/c),c=Math.round(a));k.push("_SL"+a);return b};b.upscaleToHeight=function(a){l=0<c?Math.round(a*l/c):0;c=Math.round(a);this.rendering.push("_UY"+a);return b};b.upscaleToLongest=function(a){l>c?(c=Math.round(a*c/l),l=Math.round(a)):(l=0<c?Math.round(a*l/c):0,c=Math.round(a));this.rendering.push("_UL"+a);return b};b.upscaleToWidth=function(a){c=
0<l?Math.round(a*c/l):0;l=Math.round(a);this.rendering.push("_UX"+a);return b};b.custom=function a(a){this.rendering.push(encodeURIComponent(a));return b};b.build=function(){var a=[];a.push("https://");a.push(f?f:"m.media-amazon.com");e?a.push("/images/G/",d,"/",e,"._CB",q):a.push("/images/I/",h.physicalId,".");k.length&&a.push(k.join(""));(q||k.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(h.extension);return{url:a.join(""),width:l,height:c}};return b});"use strict";r.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",
function(a){return{RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{LINKS:"links(product.links/v2)",PRODUCT_IMAGES:"productImages(product.product-images/v2)",DEAL_DETAILS:"buyingOptions[].dealDetails(product.deal-details/v1)"},getProduct:function(b,h,f,e){b={apiPath:"products/"+b,requestType:"product.request/v2",responseType:"product/v2",method:"GET",resourceInclusions:h,additionalParameters:f||{}};e&&(b.additionalParameters.ref=e);return a.makeRequest(b)},getProductsBatch:function(b,h,f,e){b=
{apiPath:"products/"+b.join(","),requestType:"product.request/v2",responseType:"collection(product/v2)/v1",method:"GET",resourceInclusions:h,additionalParameters:f||{}};e&&(b.additionalParameters.ref=e);return a.makeRequest(b)}}});"use strict";r.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",
CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",UPDATE_SUMMARY:"attach:cart:summary:update"}}});"use strict";r.when("A").register("attach.utilities.add-to-cart.natc-parameter-parser",function(a){var b={},h=/items?\[(\d+(?:\.\w+)?)\]\.?(.*)/,f=/\w+/g,e={asin:"string",offerListingId:"string",quantity:"integer","additionalParameters.giftOptions.includeGiftReceipt":"boolean","additionalParameters.installments.programId":"string"};
b.attemptTypeCoercion=function(b,f){if(e.hasOwnProperty(b))switch(e[b]){case "string":return f;case "integer":return parseInt(f);case "boolean":return"true"===f}try{var d=JSON.parse(f);return null===d||"string"===typeof d||a.$.isPlainObject(d)?f:d}catch(c){}return f};b.checkValidParameters=function(a){return a.hasOwnProperty("items[0.base][asin]")||a.hasOwnProperty("item[0].asin")};b.createAddItemsRequestItems=function(a){var d=[],e={},c;for(c in a)if(a.propertyIsEnumerable(c)){var k=a[c],p=h.exec(c);
if(p){var r=p[1];if(p=p[2].match(f)){e.hasOwnProperty(r)||(e[r]={});r=e[r];for(var t=p.join("."),n=0;n<p.length;n++){var g=p[n];n===p.length-1?r[g]=b.attemptTypeCoercion(t,k):(r.hasOwnProperty(g)||(r[g]={}),r=r[g])}}}}for(var y in e)e.propertyIsEnumerable(y)&&(a=e[y],"0.base"===y||"0"===y?d.unshift(a):d.push(a));return d};return b});"use strict";r.when("A","attach-logging","attach-variant-registration","attach.utilities.add-to-cart.natc-parameter-parser","attach.amazonapi.cart.add-items","attach.utilities.page-reader").register("attach.utilities.add-to-cart.base-product",
function(a,b,h,f,e,d){function q(a){return new l(a)}var l=a.createClass({_container:null,_rawNatcParameters:null,_cartItems:[],init:function(b){var c=a.$(b);this._container=b;b=c.serializeArray();c={};for(var d=0;d<b.length;d++){var e=b[d];c[e.name]=e.value}this._rawNatcParameters=c;this._cartItems=f.createAddItemsRequestItems(this._rawNatcParameters)},isValid:function(){return f.checkValidParameters(this._rawNatcParameters)&&this.shouldUseNatc()},shouldUseNatc:function(){var b=a.$(this._container).find("[data-a-state*\x3datc-page-state]");
0< !b.length&&(b=a.$(this._container).siblings("[data-a-state*\x3datc-page-state]"));0< !b.length&&(b=a.$("[data-a-state*\x3datc-page-state]"),0<b.length&&(b=b.first()));return 0<b.length&&(b=JSON.parse(b.text()))&&b.hasOwnProperty("shouldUseNatc")?b.shouldUseNatc:!0},getAsins:function(){return this._cartItems.map(function(a){return a.asin})},isWarrantyAddedWithBase:function(){var a=d.getAvailableWarrantyAsinsOnDetailPage(),b=this._cartItems.map(function(a){return a.asin});return a.some(function(a){return b.some(function(b){return b===
a})})},execute:function(a){var c=this;return e.addItems(this._cartItems,a?a:"dp_atch_dss_base").then(function(a){b.logCount("attach.utilities.add-to-cart.base-product.success");return{request:c,response:a}}).catch(function(a){b.logCount("attach.utilities.add-to-cart.base-product.error");return{request:c,response:a?a.data:z,error:a}})}});return{canAddWithCartApi:function(a){return q(a).isValid()},createRequest:q}});"use strict";r.register("attach.utilities.focus-management",function(){var a={attemptFocus:function(a){try{a.focus()}catch(h){}return a===
document.activeElement},focusDescendant:function(b,h){if(b&&b.children)for(var f=0;f<b.children.length;f++){var e=b.children.item("last"===h?b.children.length-f-1:f);if(a.attemptFocus(e)||a.focusDescendant(e,h))return!0}return!1}};return a});"use strict";r.when("attach-logging").register("attach.utilities.price-formatter",function(a){var b={};return{formatPrice:function(h,f,e){if(!t.Intl||!t.Intl.NumberFormat)return a.logCount("attach.utilities.price-formatter:UsedSimpleFormat"),f+" "+h.toFixed(2);
a.logCount("attach.utilities.price-formatter:UsedIntlNumberFormat");var d=e+"/"+f;b.hasOwnProperty(d)||(b[d]=new Intl.NumberFormat(e,{style:"currency",currency:f}));return b[d].format(h)}}});"use strict";r.when("A").register("attach.utilities.page-reader",function(a){return{getAvailableWarrantyAsinsOnDetailPage:function(){var b=a.capabilities.mobile?a.$("input[id|\x3dmbb-checkbox-input]").map(function(){return this.value}).get():a.$('#abbWrapper input[name^\x3d"asin"]').map(function(){return this.value}).get();
var h=a.$('[data-action\x3d"warranty-option-swatch-select"]').map(function(){var b=a.$(this).data("warranty-option-swatch-select");return b?b.warrantyAsin:null}).get();return b.concat(h)}}});"use strict";r.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(b,h){return b.replace(a,function(a,b){return h&&h.hasOwnProperty(b)?h[b]:""})}}})});